{
  "openapi": "3.0.2",
  "info": {
    "version": "1.29",
    "title": "Trexity API",
    "license": {
      "name": "MIT",
      "url": "https://raw.githubusercontent.com/trexitycode/openapi/main/license"
    },
    "termsOfService": "https://trexity.com/terms-of-service/",
    "contact": {
      "email": "support@trexity.com",
      "url": "http://trexity.com"
    },
    "description": "# Issues\n\nPlease open [bug reports](https://github.com/trexitycode/openapi/issues/new?template=bug_report.md) or [feature requests](https://github.com/trexitycode/openapi/issues/new?template=feature_request.md) requests in the [issues](https://github.com/trexitycode/openapi/issues) board.\n\n# Usage Policy\n\n**(ADDED IN v1.7)**\n\nBy using this API to provide delivery rates to your users you agree to display the [Rate](#operation/getSimpleRate) `name` without modification.\nThe [Rate](#operation/getSimpleRate) `description` can be replaced with a custom value (e.g. Same-day, etc.) or displayed as-is from the Rate.\n\nThis allows Trexity to ensure consistent messaging wherever Trexity delivery rates are shown.\n\n## Suspension & Termination\n\nFailure to comply with this Usage Policy may result in suspension of your Trexity merchant account and/or API Keys. Continued failure to comply may result in the termination of your Trexity merchant account.\n\n# Concepts & Workflows\n\n## Concepts\n\n**Parcels** represent an order, has customer information and a delivery address.\n\n**Shipments** represent a route, has one or more parcels, requirements, and a pickup address.\n\n## Preferred Workflow\n\nThis workflow is the most common and preferred way to create a shipment for delivery. Just provide a parcel,\nand optionally a pickup time to create a shipment.\n\n1. [Create a shipment](#operation/createShipment) specify the parcels, customer information and delivery address\n2. [Get parcel label](#operation/getParcelLabel) for the parcel then affix to the parcel packaging\n\n## \"Bundling\" or Batching Workflow\n\nThis workflow optimizes egress for businesses that have a large number of parcels to deliver.\nEgress is more efficient by the fact that parcels are optimally grouped into shipments and each shipment is\nassigned a route ID. The route ID (present on our labels) is what is used for staging parcels for pickup by our couriers.\n\n1. [Make a routing request](#operation/createRoutingRequest) with a batch of parcels each with a `scheduledPostAt` set to a future date\n2. [Monitor the routing request status](#operation/getRoutingStatus) by polling the status of the routing request\n3. [Get the routing result](#operation/getRoutingRequestResult) when routing is complete or errored \n4. [Get shipping labels](#operation/createShippingLabel) for each shipment created and affix to all parcel packages\n\n## Parcel Status\n\nFollow the [Parcel Events](#section/Parcel-Events) guide to understand what webhooks you will need to listen to.\n\n## Sandbox Environment\n\nAll API operations have an alternate base URL available in the sandbox environment.\n\nTo use the sandbox environment:\n1. Create an account on the [Sandbox Merchant Portal](https://merchant.beta.trexity.com/signup)\n2. Navigate to the [API Keys page](https://merchant.beta.trexity.com/api/keys) in the Advanced area.\n3. Create a new API Key\n4. Use the new API Key and the sandbox base URL in your API requests\n\n> Use the dropdown in the top right of an API operation page to select the sandbox environment server.\n\n### Credit Cards\n\nWhen signing up for the sandbox environment you can use the  following\ncredit card with any 3-digit CVC and a future expiration date.\n\n```\n4000 0012 4000 0000\n```\n\n### Expectations\n\nThe sandbox environment is intended for development and testing purposes only.\nExpect latency to be higher than the production environment.\n\nWe use our sandbox environment as well when developing new features to ensure\nthere are no breaking changes. So expect the occasional breaking change when\nusing the sandbox environment.\n\n# Responses\n\nAll endpoints will return an object and if there is actual data\nto be returned, it is going to be named `data`, where `data` may\nbe an array or an object.\n\nIf there is an `error` field present on the root JSON object, that\nmeans something went wrong and that error message is all we know about it.\nAdditionally, in some cases, you may inspect the HTTP status codes to\ngather more information.\n\nPlease check our payload/response examples in detail as well as the\ncurl examples that are a part of each section that documents an operation.\n\nExample of a successful response:\n`{ data: ... }`\n\nExample of a response with an error:\n`{ error: 'Some error message', data: null }`\n"
  },
  "tags": [
    {
      "name": "Addresses",
      "description": "Group of endpoints for handling addresses.\n\n### Address Formatting\n\nIn general wherever an address is expected the format we accept is:\n\n```\nSTREET, CITY PROVINCE POSTAL_CODE, COUNTRY\n```\n\nHowever, we also accept newlines and/or commas delimiting each component.\n\n**Good:**\n```\n123 Fake St, Ottawa ON, Canada\n123 Fake St, Toronto, Ontario, Canada\n123 Fake St, Toronto, Ontario, B4T 3F5, Canada\n```\n\n**Better:**\n```\n123 Fake St, Ottawa ON K2G 8F2, CA\n123 Fake St, Toronto ON M4T 5F6, CA\n123 Fake St, Toronto ON B4T 3F5, CA\n```\n\n## Apartment / Unit / Suite\n\nTo specify an apartment, unit or suite as part of the address use the following\nformat (for example if the apartment number was 4):\n```\n4-123 Fake St, Ottawa ON, K2G 8FT Canada\n123 Fake St Apt 4, Ottawa ON, K2G 8FT Canada\n123 Fake St Apartment 4, Ottawa ON, K2G 8FT Canada\n123 Fake St Unit 4, Ottawa ON, K2G 8FT Canada\n123 Fake St Suite 4, Ottawa ON, K2G 8FT Canada\n123 Fake St #4, Ottawa ON, K2G 8FT Canada\n```\n"
    },
    {
      "name": "Shipping Rates",
      "description": "Prior to creating a Shipment, you can calculate the rates based on the pickup address and the number of stops the driver has to do.\nSee our [rates](/#operation/getSimpleRate) endpoint for more information.\n"
    },
    {
      "name": "Shipments",
      "description": "The most common approach to get a shipment on the road is to:\n  * [Create a Shipment](/#operation/createShipment)\n\nAfter [posting](/#section/Posting-a-shipment), assuming everything went well, the Trexity system will keep pinging drivers in the vicinity of the pickup address.\nIn the rare case of not finding an available driver in the vicinity of the pickup address, Trexity will refuse to post the shipment.\n\nAlternatively, Trexity allows for planning in the future via Scheduling.\nYou can schedule the posting of the Shipment in the future.\nTrexity guarantees that the scheduled Shipment will not be posted or broadcasted prior to the time it was scheduled for.\nPlease see the [details](/#operation/createShipment) here.\n"
    },
    {
      "name": "Parcels",
      "description": "Convenient API endpionts for managing shipment parcels.\n"
    },
    {
      "name": "Routing",
      "description": "Create and get status information for asynchronous routing requests.\n"
    },
    {
      "name": "Receipts",
      "description": "Retrieve receipt information\n"
    },
    {
      "name": "Storage",
      "description": "Storage related operations.\n\n> IMPORTANT: These operations have a different server URL.\n"
    },
    {
      "name": "Webhooks",
      "description": "Retrieve and manage webhooks for a Trexity Merchant.\n\n## Parcel Events\n\nA Shipment is a container of parcels, each with their own delivery address.\nHowever, the Shipment has a single pickup address. As activity occurs on a\nparcel the Shipment's `currentStatus` oscilates between `OUT_FOR_DELIVERY`,\n`ARRIVED_AT_DELIVERY` and `DELIVERED`. However, the Shipment alone doesn't\ninform you of what parcel the status is for.\n\nTo listen to parcel events listen to the following webhooks:\n- `parcel.created` The parcel has been created during shipment creation or update\n- `parcel.updated` The parcel has been updated during shipment update\n- `parcel.deleted` The parcel has been deleted during shipment udpate\n- `parcel.picked_up` The driver has scanned and picked up a parcel\n- `parcel.delivered` The driver has scanned and delivered a parcel\n- `parcel.returning` The driver is returning a parcel\n- `parcel.returned` The driver has returned a parcel to pickup address\n\nThe request payload of these webhook events indicate the parcel that is currently\nbeing affected.\n\n## Storing The shipmentId\n\nIf you have the need to update pickup-related information such as the pickup address, POD settings,\nor the pickup instructions, or you are polling the shipment endpoints for the status of the shipment\nthen you will need to store and reference the `shipmentId`. However, the `shipmentId` can change for\na parcel if the parcel is moved, cloned or bundled. You can re-map your orders/parcels by listening to\nthe `shipment.created` webhook.\n\n> You will need to ensure that you provide a value for a parcel's `externalId` field when you crate a shipment.\n> This field is intended to be an identifier that references back to your system.\n\n```js\n// This sample code uses Nodejs with Express\nfunction trexity_shipmentCreated (req, res, next) {\n  const shipmentId = req.body.data.id\n  const parcels = body.parcels\n  const promises = []\n\n  for (const parcel of parcels) {\n    const orderId = parcel.externalId\n\n    // Generally this is where you would update the Trexity shipment ID associated to your order.\n    //\n    // For example update the metadata associated to your order where the orders_metadata table\n    // has at least the following columns: order_id, key, and value, and there is a unique constraint\n    // on the order_id:key column pair. The end result is that the metadata field will be upserted.\n    const promise = executeParameterizedSql(`\n      INSERT INTO orders_metadata (order_id, key, value)\n      VALUES ($1, 'trexity_shipment_id', $2)\n      ON CONFLICT\n      DO UPDATE set value = EXCLUDED.value\n    `, [orderId, shipmentId])\n\n    promises.push(promise)\n  }\n\n  Promise.allSettled(promises)\n    .then(() => res.status(200).json({}))\n}\n```\n\n## Verifying Webhook Requests\n\nAll webhook requests have a header that contains a signature signed with the Trexity Merchant's\nwebhook secret as found in their \"Trexity API\" settings. To verify the signature take the raw\nrequest body as text and create a SHA256 HMAC signed with the merchant's webhook secret and covert to hex.\n\nExample:\n```\n// nodejs\nconst text = await new Promise((resolve, reject) => {\n  const buff = []\n  req.setEncoding('utf8')\n  req.on('data', chunk => (buff.push(chunk)))\n  req.once('end', resolve(buff.join('')))\n  req.once('error', reject)\n})\n\nconst sig = require('crypto')\n  .createHmac('sha256', process.env.TRX_MERCH_WEBHOOK_SECRET)\n  .update(text)\n  .digest('hex')\n\nconst isValid = req.headers['x-trexity-signature'] === sig\n\nif (!isValid) {\n  res.statusCode = 403\n  res.end('Forbidden', 'utf8')\n  return\n}\n\nconst body = JSON.parse(body)\n// ...\n```\n"
    },
    {
      "name": "Locations",
      "description": "Retrieve and manage Locations for a Trexity Merchant.\n"
    },
    {
      "name": "Regions",
      "description": "Region related operations that usually involve service cities and their zones\n"
    }
  ],
  "servers": [
    {
      "description": "production",
      "url": "https://trexity.app/api/v1_0"
    },
    {
      "description": "sandbox",
      "url": "https://trexity-driver-mobile.uc.r.appspot.com/api/v1_0"
    }
  ],
  "components": {
    "securitySchemes": {
      "MerchantApiKeyAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "This authentication strategy uses a Trexity Merchant API KEY. This API KEY is used\nas a bearer token.\n\nIn order to obtain a Trexity Merchant API key, you need to sign-up as Merchant at https://merchant.trexity.com/\nand create an API KEY through your merchant portal.\n\nFeel free to contact support@trexity.com for any questions you may have.\n\nExample:\n```\ncurl -X POST {server-url}/rates/simple \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer <Merchant API Key>' \\\n  -d '{\n    \"pickupAddress\": \"9 Slack Rd, Nepean ON K2G 0B7, CA\",\n    \"deliveryAddress\": \"207 Queen St, Ottawa ON K1P 6E5, CA\",\n    \"requirements\": {},\n    \"orderValue\": 2500\n  }'\n```\n\nPlease check our [curl examples](/#operation/getSimpleRate) for more examples.\n"
      },
      "AccessTokenAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "This authentication stratigy requires an access token used as a 'Bearer' token.\n\nCurrently access tokens are only obtained and used by trusted services.\n\nExample:\n```\n// nodejs\nrequire('http').get('{server-url}/{endpoint}', {\n  headers: {\n    accept: 'application/json',\n    authorization: `Bearer ${process.env.ACCESS_TOKEN}`\n  }\n}, (res) => {\n  // ... handle response\n})\n```\n"
      }
    },
    "schemas": {
      "DeliveryWindowProps": {
        "type": "object",
        "properties": {
          "pickupAfter": {
            "description": "**(ADDED IN v1.12)** Date time in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\n**If present then deliverAfter and deliverBefore are ignored.**\n\nIf in the past then defaults to ASAP.\nCan be set to `new Date().toISOString()` or `\"ASAP\"` for ASAP.\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n\nAn example: ASAP\n",
            "type": "string"
          },
          "deliverAfter": {
            "description": "**(ADDED IN v1.10)** Date time in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nIf in the past then defaults to ASAP, and must be less than or equal to `deliverBefore` if `deliverBefore` is provided.\nCan be set to `new Date().toISOString()` or `\"ASAP\"` for ASAP.\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n\nAn example: ASAP\n",
            "type": "string"
          },
          "deliverBefore": {
            "description": "**(ADDED IN v1.10)** Date time in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nCannot be in the past.\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n",
            "type": "string"
          }
        }
      },
      "Address": {
        "description": "Address in the format \"STREET, CITY PROVINCE POSTAL_CODE, COUNTRY\" (e.g. \"456 Elgin St, Ottawa ON K2P 1N5, CA\").\n\nSee [Addresses](#tag/Addresses)\n",
        "type": "string",
        "maxLength": 512
      },
      "ShipmentRequirements": {
        "type": "object",
        "description": "Object representing the requirements that must be met by a driver in order\nfor them to be considered for delivery.\n\nIf no requirements object is specified then the merchant location's default requirements\nwill be used.\n",
        "properties": {
          "vehicleType": {
            "type": "string",
            "description": "Describe the type of vehicle that must be used for a shipment.\n\n- small - Sedan, hatchback, etc [example: Honda Civic]\n- medium - SUV or similar [example: Toyota Sienna]\n",
            "enum": [
              "small",
              "medium"
            ]
          },
          "legalAgeAlcohol": {
            "type": "boolean",
            "description": "Contains any trace of alcohol.\n"
          },
          "perishable": {
            "type": "boolean",
            "description": "Must be delivered by a driver who is equipped to deliver perishable items.\n"
          },
          "returnReusables": {
            "type": "boolean",
            "description": "Must be delivered by a driver who will return collected reusables back to pickup.\n"
          },
          "custom pricing": {
            "type": "boolean",
            "description": "Please contact a Trexity support agent for custom pricing options.\n"
          }
        }
      },
      "SimpleRatePayload": {
        "description": "A minimal object that describes a direct shipment",
        "allOf": [
          {
            "$ref": "#/components/schemas/DeliveryWindowProps"
          },
          {
            "type": "object",
            "required": [
              "deliveryAddress"
            ],
            "properties": {
              "pickupAddress": {
                "$ref": "#/components/schemas/Address"
              },
              "numLabels": {
                "type": "number",
                "minimum": 1,
                "default": 1,
                "description": "**(added in 1.12)** The number of labels for the parcel (each separate package needs a label).\n"
              },
              "deliveryAddress": {
                "type": "string",
                "description": "An address",
                "items": {
                  "$ref": "#/components/schemas/Address"
                }
              },
              "requirements": {
                "$ref": "#/components/schemas/ShipmentRequirements"
              },
              "orderValue": {
                "type": "number",
                "minimum": 0,
                "description": "The order value, if any. Specified in cents."
              }
            }
          }
        ]
      },
      "GeoJSONDirectionsResult": {
        "type": "object",
        "nullable": true,
        "description": "GeoJSON object that defines the path of the Shipment, taking into account multiple dropoffs (if any).\n\nGeoJSON is defined at https://tools.ietf.org/html/rfc7946\n\nWe are defining the geometry of the path using an array of LineString, which in plain English means\n\npiecewise linear segments connected on the map.\n"
      },
      "Rate": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the rate to show to the customer (if applicable)"
          },
          "description": {
            "type": "string",
            "description": "**(ADDED IN v1.7)** The description of the rate to show to the customer (if applicable)\n"
          },
          "total": {
            "type": "number",
            "description": "The total fee in cents for delivery with taxes."
          },
          "deliveryWithoutTaxes": {
            "type": "number",
            "description": "**(ADDED IN v1.12)** The total fee in cents for the delivery portion of the rate.\n"
          },
          "fuelWithoutTaxes": {
            "type": "number",
            "description": "**(ADDED IN v1.12)** The total fee in cents for fuel cost portion of the rate.\n"
          },
          "surchargesWithoutTaxes": {
            "type": "array",
            "description": "**(ADDED IN v1.14)** The breakdown of each surcharge before taxes added to the rate\n",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "oversized",
                    "distance",
                    "large-vehicle"
                  ],
                  "description": "The surcharge type.\n\n- `oversized` applied for a surplus of labels\n- `distance` applied for long distance deliveries\n- `large-vehicle` applied for shipments that require a medium or large vehicle\n"
                },
                "amount": {
                  "type": "number",
                  "description": "The amount in cents of the surcharge"
                }
              }
            }
          },
          "totalWithoutTaxes": {
            "type": "number",
            "description": "The total fee in cents for entire delivery without taxes.\n\nEquates to the sum of\n- `deliveryWithoutTaxes`\n- `fuelWithoutTaxes`\n- total `amount` from `surchargesWithoutTaxes`\n"
          },
          "taxRates": {
            "type": "object",
            "description": "**(ADDED IN v1.1)** An object whos keys are tax rate codes and value is the tax rate.\n",
            "additionalProperties": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "exclusiveMinimum": true,
              "exclusiveMaximum": true
            }
          },
          "taxAmounts": {
            "type": "object",
            "description": "**(ADDED IN v1.12)** An object whos keys are tax rate codes and value is the tax amount charged in cents.\n",
            "additionalProperties": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "exclusiveMinimum": true,
              "exclusiveMaximum": true
            }
          },
          "totalTaxes": {
            "type": "number",
            "description": "**(ADDED IN v1.12)** The total taxes charged in cents.\n"
          },
          "directionsResult": {
            "$ref": "#/components/schemas/GeoJSONDirectionsResult"
          },
          "pickupDeliveryDistance": {
            "type": "number",
            "description": "Estimated distance (in meters) that the driver would need to drive (starting from the pickup location) in order to finalize this shipment (takes into account multiple dropoffs, if any)."
          },
          "pickupDeliveryDuration": {
            "type": "number",
            "description": "Estimated duration (in seconds) of the entire trip (starting from the pickup location) that the driver would have to make in order to finalize this shipment (takes into account multiple dropoffs, if any).\n"
          }
        }
      },
      "SimpleRate": {
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Rate"
          },
          {
            "type": "object",
            "properties": {
              "estimateScheduledPostAt": {
                "description": "**(add in 1.10)** Date time in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n",
                "type": "string"
              },
              "estimatePickupAt": {
                "description": "**(add in 1.10)** Date time in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n",
                "type": "string"
              },
              "estimateDeliverAt": {
                "description": "**(add in 1.10)** Date time in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n",
                "type": "string"
              }
            }
          }
        ]
      },
      "SimpleRateResponse": {
        "description": "Returns all rates that apply for this Shipment. Each rate will have the distance (in meters), duration (in seconds) of the trip\nand the fee (in Canadian cents).\n",
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SimpleRate"
            }
          }
        }
      },
      "PickupStartAt": {
        "description": "Specifies the start of the pickup window for the shipment (i.e. the earliest time that the driver can arrive to pickup the shipment).\nThe second and millsecond time components of the date will be ignored.\n\nWhen specified, this value must match the start of an available pickup window.\n\nReview the available [pickup windows](https://trexity.zendesk.com/hc/en-us/articles/16940024932627-Pickup-windows).\n\n**Data type**\n\nDate time in Simplified ISO8601 format `YYYY-MM-DDTHH:mm:ss.sssZ`\n\nNote that ISO date strings are always in UTC time.\n\nAn example: `2020-07-25T10:48:08.987Z`\n",
        "type": "string",
        "nullable": true
      },
      "PickupEndAt": {
        "description": "Specifies the end of the pickup window for the shipment (i.e. the latest time that the driver can arrive to pickup the shipment).\nThe second and millsecond time components of the date will be ignored.\n\nWhen specified, this value must match the end of the available pickup window indicated by the value of `pickupStartAt`.\n\nReview the available [pickup windows](https://trexity.zendesk.com/hc/en-us/articles/16940024932627-Pickup-windows).\n\n**Data type**\n\nDate time in Simplified ISO8601 format `YYYY-MM-DDTHH:mm:ss.sssZ`\n\nNote that ISO date strings are always in UTC time.\n\nAn example: `2020-07-25T10:48:08.987Z`\n",
        "type": "string",
        "nullable": true
      },
      "DeliverStartAt": {
        "description": "Specifies the start of the deliver window for the shipment (i.e. the earliest time that the driver can deliver the shipment).\nThe second and millsecond time components of the date will be ignored.\n\nWhen specified, this value must match the start of a suggested delivery window.\n\nThe delivery windows are unique to each of your locations within Trexity because they are determined by the market's pickup windows and each location's delivery SLA. A delivery SLA is the maximum amount of time a delivery can take (.e.g. 2 hours). The general formula for computing a delivery window for each pickup window is the following.\n\n```\ndeliveryWindowStart = pickupWindowStart\ndeliveryWindowEnd = pickupWindowEnd + deliverySLA\n```\n\nReview the available [pickup windows](https://trexity.zendesk.com/hc/en-us/articles/16940024932627-Pickup-windows).\nReview your suggested [delivery windows](https://merchant.trexity.com/api).\n\n**Data type**\n\nDate time in Simplified ISO8601 format `YYYY-MM-DDTHH:mm:ss.sssZ`\n\nNote that ISO date strings are always in UTC time.\n\nAn example: `2020-07-25T10:48:08.987Z`\n",
        "type": "string",
        "nullable": true
      },
      "DeliverEndAt": {
        "description": "Specifies the start of the deliver window for the shipment (i.e. the latest time that the driver can deliver the shipment).\nThe second and millsecond time components of the date will be ignored.\n\nWhen specified, this value must match the end of the suggested delivery window indicated by the value of `deliverStartAt`.\n\nThe delivery windows are unique to each of your locations within Trexity because they are determined by the market's pickup windows and each of your location's delivery SLA. A delivery SLA is the maximum amount of time a delivery can take (.e.g. 2 hours). The general formula for computing a delivery window for each pickup window is the following.\n\n```\ndeliveryWindowStart = pickupWindowStart\ndeliveryWindowEnd = pickupWindowEnd + deliverySLA\n```\n\nReview the available [pickup windows](https://trexity.zendesk.com/hc/en-us/articles/16940024932627-Pickup-windows).\nReview your suggested [delivery windows](https://merchant.trexity.com/api).\n\n**Data type**\n\nDate time in Simplified ISO8601 format `YYYY-MM-DDTHH:mm:ss.sssZ`\n\nNote that ISO date strings are always in UTC time.\n\nAn example: `2020-07-25T10:48:08.987Z`\n",
        "type": "string",
        "nullable": true
      },
      "ParcelLoad": {
        "type": "object",
        "description": "**(ADDED IN v1.9)** Optional dimensions and weight of the parcel. This\nwill inform the driver matching algorithm accordingly.\n\n**(CHANGED IN v1.17)** The maximums have changed from 130 cm length, 80 cm width\nand 80 cm height, to 91 cm for any dimension. The maximum for weight changed from\n30000 grams to 15876.\n\n**(CHANGED IN v1.23)** The maximum weight changed from 15876 to 9072 grams to coincides\nwith our merchant code of conduct policy.\n\n**(CHANGED IN v1.24)** The maximum weight changed from 9072 back to 15876 grams to give\nmerchants time to adjust to the new weight limit.\n",
        "properties": {
          "length": {
            "type": "integer",
            "minimum": 0,
            "maximum": 91,
            "description": "Length (in centimeters). Maximum is ~3 feet."
          },
          "width": {
            "type": "integer",
            "minimum": 0,
            "maximum": 91,
            "description": "Width (in centimeters). Maximum is ~3 feet."
          },
          "height": {
            "type": "integer",
            "minimum": 0,
            "maximum": 91,
            "description": "Height (in centimeters). Maximum is ~3 feet."
          },
          "weight": {
            "type": "integer",
            "minimum": 0,
            "maximum": 15876,
            "description": "Weight (in grams). Maximum is ~35 lbs."
          }
        }
      },
      "DirectShipmentPayload": {
        "description": "Payload object used to identify a shipment from a pickup address to a delivery address",
        "type": "object",
        "required": [
          "pickupAddress",
          "deliveryAddress",
          "deliveryName",
          "description",
          "orderId",
          "parcelValue"
        ],
        "properties": {
          "scheduledPostAt": {
            "type": "string",
            "deprecated": true,
            "description": "**DEPRECATED AS OF v1.21**. \nIf provided, then an approximate pickup time will be determined based on the pickup windows and the scheduledPostAt time.\nIf a pickup time cannot be determined, then no complex rate will be returned and an error will be returned.\n\nInstead to schedule a shipment for pickup/delivery use one of the following new fields:\n1) pickup windows (pickupStartAt/pickupEndAt)\n2) delivery windows (deliverStartAt, deliverEndAt)\n"
          },
          "pickupStartAt": {
            "$ref": "#/components/schemas/PickupStartAt"
          },
          "pickupEndAt": {
            "$ref": "#/components/schemas/PickupEndAt"
          },
          "deliverStartAt": {
            "$ref": "#/components/schemas/DeliverStartAt"
          },
          "deliverEndAt": {
            "$ref": "#/components/schemas/DeliverEndAt"
          },
          "pickupAddress": {
            "$ref": "#/components/schemas/Address"
          },
          "pickupAddressNotes": {
            "type": "string",
            "description": "Extra information relating to the pickup address ONLY, like the apartment/unit number."
          },
          "pickupInstructions": {
            "type": "string",
            "description": "**(renamed from pickupNotes to pickupInstructions in v1.16) pickupNotes will still be accepted**\nSpecial notes or instructions regarding pickup like the description of the location, what door to use, etc.\n"
          },
          "merchantPpid": {
            "type": "string",
            "description": "**(ADDED IN 1.9)** Partner-provided ID of the merchant. This ID can be used when querying for shipments. Only used by Partner accounts.\n"
          },
          "merchantName": {
            "type": "string",
            "description": "**(ADDED IN 1.9)** Partner-provided name of the merchant. This will be displayed in place of the merchant name defined in the merchant profile. Only used by Partner accounts.\n"
          },
          "merchantPhone": {
            "type": "string",
            "description": "**(ADDED IN 1.9)** Partner-provided phone of the merchant. This will be displayed in place of the merchant phone defined in the merchant profile. Only used by Partner accounts.\n"
          },
          "merchantEmail": {
            "type": "string",
            "description": "**(ADDED IN 1.9)** Partner-provided email of the merchant. This will be displayed in place of the merchant email defined in the merchant profile. Only used by Partner accounts.\n"
          },
          "requirements": {
            "$ref": "#/components/schemas/ShipmentRequirements"
          },
          "ignoreTargetDeliveryDuration": {
            "type": "boolean",
            "deprecated": true,
            "description": "**DEPRECATED AS OF v1.18**\n\n~~Ignore the target delivery duration for this shipment only~~\n"
          },
          "deliveryAddress": {
            "$ref": "#/components/schemas/Address"
          },
          "deliveryAddressNotes": {
            "type": "string",
            "description": "Extra notes relating to the delivery address, such as apartment/unit number, reference, description of the location, etc."
          },
          "deliveryInstructions": {
            "type": "string",
            "description": "**(ADDED IN 1.4)** Delivery instructions for drop off\n"
          },
          "deliveryName": {
            "type": "string",
            "description": "The name of the recipient"
          },
          "description": {
            "type": "string",
            "description": "Description of the parcel being delivered"
          },
          "orderId": {
            "type": "string",
            "maxLength": 20,
            "description": "The order ID that this parcel belongs to."
          },
          "parcelValue": {
            "type": "number",
            "minimum": 0,
            "description": "The dollar value of the parcel in CDN as cents"
          },
          "numLabels": {
            "type": "number",
            "minimum": 1,
            "default": 1,
            "description": "**(ADDED IN 1.12)** The number of labels for the parcel (each separate package needs a label).\n"
          },
          "deliveryEmail": {
            "type": "string",
            "format": "email",
            "description": "The email address of the recipient"
          },
          "deliveryPhone": {
            "type": "string",
            "description": "The cell phone number of the recipient"
          },
          "requiresPersonHandoff": {
            "type": "boolean",
            "description": "Does this parcel require delivery PIN verification?"
          },
          "containsAlcohol": {
            "type": "boolean",
            "description": "**(ADDED IN v1.8)** Does this parcel contain alcoholic products?\n"
          },
          "externalId": {
            "type": "string",
            "maxLength": 256,
            "description": "**(ADDED IN v1.8)**\nThe ID of the external entity that is associated to this delivery (e.g.\nthe external order or shipment ID).\n"
          },
          "scanId": {
            "type": "string",
            "maxLength": 256,
            "description": "**(ADDED IN v1.9)** The ID embedded in your custom label’s QR code. If\nnot specified, you will be required to use our built-in labels. If\nspecified, you will not be able to request our built-in label for this\nparcel.\n"
          },
          "load": {
            "$ref": "#/components/schemas/ParcelLoad"
          },
          "metadata": {
            "type": "object",
            "description": "**(ADDED IN v1.1)**\nThe metadata fields associated to the parcel. If the intent is to\nlist shipments with this metadata field, then ensure the value is\nsaved as a string and not say a number.\n"
          }
        }
      },
      "ComplexRateStatusResponse": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "description": "A unique identifier for the asynchronous request. This can be used to retrieve the results\nof a request when it has completed.\n"
          },
          "callbackInSeconds": {
            "type": "integer",
            "description": "An estimated number of seconds to complete the request.\nWait this long before checking the status again.\n"
          },
          "isCompleted": {
            "type": "boolean",
            "description": "Specifies if the request has completed."
          }
        }
      },
      "ComplexRateResultResponse": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "description": "The message of the error"
                },
                "code": {
                  "type": "string",
                  "enum": [
                    "PICKUP_ADDRESS_INVALID",
                    "PICKUP_NO_GEOCODE",
                    "PICKUP_OUTSIDE_SERVICE_AREA",
                    "DELIVERY_ADDRESS_INVALID",
                    "DELIVERY_NO_GEOCODE",
                    "DELIVERY_OUTSIDE_SERVICE_AREA",
                    "SYSTEM_ERROR"
                  ],
                  "description": "The error code that identifies the error"
                },
                "orderId": {
                  "type": "string",
                  "description": "The \"orderId\" of the parcel this error relates to"
                },
                "params": {
                  "type": "object",
                  "description": "An object that contains extra information related to the error (i.e.\naddress, etc.)\n"
                }
              }
            }
          },
          "result": {
            "type": "object",
            "properties": {
              "rateId": {
                "type": "string",
                "description": "This rate response expires after 8 hours, and can be converted to\nshipments using the [Bulk Shipment Creation](/#operation/createCreateBulkShipmentsRequest)\nendpoint, and this rateId. Please note that pricing may differ\nbetween this rate response and the creation process, where the\nlikelihood of drift increases with time.\n"
              },
              "rates": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Rate"
                }
              },
              "unservedOrderIds": {
                "type": "array",
                "description": "Array of order IDs that could not be assigned to a shipment due to\ndelivery constraints\n",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "SimplifiedDateISOString": {
        "description": "Date time in Simplified ISO8601 format `YYYY-MM-DDTHH:mm:ss.sssZ`\n\nNote that ISO date strings are always in UTC time.\n\nAn example: `2020-07-25T10:48:08.987Z`\n",
        "type": "string",
        "nullable": true
      },
      "ShipmentStatus": {
        "type": "string",
        "enum": [
          "WAITING_FOR_ACCEPTANCE",
          "WAITING_TO_START",
          "EN_ROUTE_TO_PICKUP",
          "ARRIVED_AT_PICKUP",
          "OUT_FOR_DELIVERY",
          "ARRIVED_AT_DELIVERY",
          "DELIVERED",
          "RENOUNCED_BY_DRIVER",
          "CANCELLED",
          "EXPIRED",
          "ON_HOLD",
          ""
        ],
        "description": "The status of the queried Shipment.\n\n(empty string) - Shipment is a draft. Shipments are considered a draft if they haven't been posted to the driver network yet and scheduling has been disabled.\n\nWAITING_FOR_ACCEPTANCE - Shipments that have been posted to the driver network, but waiting for a driver to accept them. When a shipment is posted the owning merchant's credit card is pre-authorized for the full shipment rate.\n\nEN_ROUTE_TO_PICKUP - Shipments where a driver has accepted and the driver is driving to the pickup location.\n\nARRIVED_AT_PICKUP - Shipments where a driver has arrived at the pickup location.\n\n---\n\n**A shipment can osciliate between these three statuses while parecels are being deliveried.**\n\nOUT_FOR_DELIVERY - Shipments where a driver is delivering a parcel.\n\nARRIVED_AT_DELIVERY - Shipments where a driver has arrived at a parcel's the delivery location.\n\nDELIVERED - Shipments that where a driver has delivered a parcel.\n\n---\n\nRENOUNCED_BY_DRIVER - Shipments that have been explicitly unaccepted by a driver. Drivers can only renounce shipments before they have picked up any orders.\n\nCANCELLED - Shipments that have been cancelled.\n\nEXPIRED - Shipments that have been posted to drivers and have waited for acceptance longer than 7 days. Similar to being on hold, the shipment rate pre-authorization is reversed on the owning merchant's credit card, and these shipments can be re-posted at a later time.\n\nON_HOLD - Shipments that have been posted but not accepted and have been explicitly removed from the driver network. All shipments that are on hold will have the shipment rate pre-authorization reversed on the owning merchant's credit card. Additionally, shipments on hold can be re-posted at a later time.\n"
      },
      "ShipmentRate": {
        "type": "object",
        "description": "**(ADDED IN v1.27)** The rate of a Shipment.\n",
        "properties": {
          "total": {
            "type": "number",
            "description": "The total fee in cents for delivery with taxes."
          },
          "deliveryWithoutTaxes": {
            "type": "number",
            "description": "The total fee in cents for the delivery portion of the rate."
          },
          "fuelWithoutTaxes": {
            "type": "number",
            "description": "The total fee in cents for fuel cost portion of the rate."
          },
          "surchargesWithoutTaxes": {
            "type": "array",
            "description": "The breakdown of each surcharge before taxes added to the rate",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "oversized",
                    "distance",
                    "large-vehicle"
                  ],
                  "description": "The surcharge type.\n\n- `oversized` applied for a surplus of labels\n- `distance` applied for long distance deliveries\n- `large-vehicle` applied for shipments that require a medium or large vehicle\n"
                },
                "amount": {
                  "type": "number",
                  "description": "The amount in cents of the surcharge"
                }
              }
            }
          },
          "totalWithoutTaxes": {
            "type": "number",
            "description": "The total fee in cents for entire delivery without taxes.\n\nEquates to the sum of\n- `deliveryWithoutTaxes`\n- `fuelWithoutTaxes`\n- total `amount` from `surchargesWithoutTaxes`\n"
          },
          "taxRates": {
            "type": "object",
            "description": "An object whos keys are tax rate codes and value is the tax rate.",
            "additionalProperties": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "exclusiveMinimum": true,
              "exclusiveMaximum": true
            }
          },
          "taxAmounts": {
            "type": "object",
            "description": "An object whos keys are tax rate codes and value is the tax amount charged in cents.",
            "additionalProperties": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "exclusiveMinimum": true,
              "exclusiveMaximum": true
            }
          },
          "totalTaxes": {
            "type": "number",
            "description": "The total taxes charged in cents."
          }
        }
      },
      "Location": {
        "description": "A location described by latitude and longitude",
        "type": "object",
        "nullable": true,
        "properties": {
          "latitude": {
            "type": "number",
            "minimum": -90,
            "maximum": 90
          },
          "longitude": {
            "type": "number",
            "minimum": -180,
            "maximum": 90
          }
        }
      },
      "Parcel": {
        "description": "A parcel to be delivered in a shipment",
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "**(ADDED IN 1.9)** Unique identifier for this parcel.\n"
          },
          "numLabels": {
            "type": "number",
            "minimum": 1,
            "default": 1,
            "description": "**(ADDED IN 1.12)** The number of labels for the parcel (each separate package needs a label).\n"
          },
          "sortOrder": {
            "type": "number",
            "minimum": 0,
            "description": "**(ADDED IN 1.28)** Represents the ascending order of this parcel in relation to other parcels in a shipment.\nLower values are estimated to be delivered before higher values. The value of this property could change\ndepending on the information we have of the courier at the time of the request, and/or if parcels are removed from the shipment.\n"
          },
          "sequence": {
            "type": "number",
            "description": "**(ADDED IN 1.29)** Represents the fixed ascending order of this parcel in relation to other parcels in a shipment\nas known at the time the shipment was created. This is the same sequence number that appears on the\nlabel for this parcel and what couriers may ask for at pickup. *Only present if the shipment has more than one parcel.*\n"
          },
          "shipmentId": {
            "type": "string",
            "description": "**(ADDED IN 1.9)** Shipment container ID. In the case of a return, this will be the shipment ID of the original shipment (not the newly created return shipment)\n"
          },
          "deliveryAddress": {
            "$ref": "#/components/schemas/Address"
          },
          "deliveryAddressLocation": {
            "$ref": "#/components/schemas/Location"
          },
          "deliveryAddressProvince": {
            "type": "string",
            "nullable": true,
            "description": "The province of the deliveryAddress. Example: Ontario.\n"
          },
          "deliveryAddressCountry": {
            "type": "string",
            "nullable": true,
            "description": "The country of the deliveryAddress. Example: Canada.\n"
          },
          "deliveryAddressCity": {
            "type": "string",
            "nullable": true,
            "description": "The city of the pickupAddress. Example: Ottawa.\n"
          },
          "deliveryAddressServiceCity": {
            "type": "string",
            "nullable": true,
            "description": "The service city of the pickupAddress. Example: Ottawa, ON.\n"
          },
          "deliveryAddressNotes": {
            "type": "string",
            "description": "Extra notes relating to the delivery address, such as apartment/unit number, reference, description of the location, etc."
          },
          "deliveryInstructions": {
            "type": "string",
            "description": "**(ADDED IN 1.4)** Delivery instructions for drop off\n"
          },
          "deliveryName": {
            "type": "string",
            "description": "The name of the recipient"
          },
          "deliveryEmail": {
            "type": "string",
            "format": "email",
            "description": "The email address of the recipient"
          },
          "deliveryPhone": {
            "type": "string",
            "description": "The cell phone number of the recipient"
          },
          "description": {
            "type": "string",
            "description": "Description of the parcel being delivered"
          },
          "orderId": {
            "type": "string",
            "maxLength": 20,
            "description": "The order ID that this parcel belongs to."
          },
          "parcelValue": {
            "type": "number",
            "minimum": 0,
            "description": "The dollar value of the parcel in CDN as cents"
          },
          "requiresPersonHandoff": {
            "type": "boolean",
            "description": "Does this parcel require delivery PIN verification?"
          },
          "containsAlcohol": {
            "type": "boolean",
            "description": "**(ADDED IN v1.8)** Requires legal age verification by law\n"
          },
          "externalId": {
            "type": "string",
            "maxLength": 256,
            "description": "**(ADDED IN v1.2)** The ID of the external entity that is associated to\nthis parcel (e.g. the external order or shipment ID).\n"
          },
          "scanId": {
            "type": "string",
            "maxLength": 256,
            "description": "**(ADDED IN v1.9)** The ID embedded in your custom label’s QR code. If\nnot specified, you will be required to use our built-in labels. If\nspecified, you will not be able to request our built-in label for this\nparcel.\n"
          },
          "load": {
            "$ref": "#/components/schemas/ParcelLoad"
          },
          "metadata": {
            "type": "object",
            "description": "**(ADDED IN v1.1)** Object with metadata fields. If the intent is to\nlist shipments with this metadata field, then ensure the value is\nsaved as a string and not say a number.\n"
          },
          "driverDeliveredAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "isDelivered": {
            "type": "boolean",
            "description": "Whether this Parcel has been delivered.\nIf it has been, we store the timestamp in driverDeliveredAt.\n"
          },
          "secondsFromPickupToDelivery": {
            "type": "number",
            "description": "If a driver has accpeted, the estimated seconds it will take the driver to arrive at the pickup address."
          }
        }
      },
      "Shipment": {
        "type": "object",
        "description": "A shipment object that has a pickup address and can have several parcels each with their on delivery address.",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier of the Shipment in Trexity"
          },
          "currentStatus": {
            "$ref": "#/components/schemas/ShipmentStatus"
          },
          "pickupAddress": {
            "type": "string",
            "description": "The starting address that the driver must pick up the parcel(s) from."
          },
          "pickupAddressNotes": {
            "type": "string",
            "description": "Extra notes relating to the pickup address, such as apartment/unit number, reference, description of the location, etc."
          },
          "pickupInstructions": {
            "type": "string",
            "description": "Special notes or instructions regarding pickup"
          },
          "requirements": {
            "$ref": "#/components/schemas/ShipmentRequirements"
          },
          "scheduledPostAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "deliverStartAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "deliverEndAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "pickupStartAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "pickupEndAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "merchantId": {
            "type": "string",
            "description": "User id of the Merchant who is the owner of the Shipment"
          },
          "driverId": {
            "type": "string",
            "description": "User id of the Driver who has accepted this Shipment",
            "nullable": true
          },
          "directionsResult": {
            "$ref": "#/components/schemas/GeoJSONDirectionsResult"
          },
          "rate": {
            "$ref": "#/components/schemas/ShipmentRate"
          },
          "gdprRedacted": {
            "type": "boolean",
            "description": "Whether this shipment has been GDPR redacted.\nPlease see https://ec.europa.eu/info/law/law-topic/data-protection/reform/rules-business-and-organisations_en for more details.\n"
          },
          "archived": {
            "type": "boolean",
            "description": "Whether this Shipment has been archived."
          },
          "pickupAddressLocation": {
            "$ref": "#/components/schemas/Location"
          },
          "pickupAddressProvince": {
            "type": "string",
            "nullable": true,
            "description": "The province of the pickupAddress. Example: Ontario.\n"
          },
          "pickupAddressCountry": {
            "type": "string",
            "nullable": true,
            "description": "The country of the pickupAddress. Example: Canada.\n"
          },
          "pickupAddressCity": {
            "type": "string",
            "nullable": true,
            "description": "The city of the pickupAddress. Example: Ottawa.\n"
          },
          "pickupAddressServiceCity": {
            "type": "string",
            "nullable": true,
            "description": "The service city of the pickupAddress. Example: Ottawa, ON.\n"
          },
          "cachedDriverName": {
            "type": "string",
            "nullable": true,
            "description": "Name of the driver that is delivering this Shipment."
          },
          "cachedTotalRouteDistance": {
            "type": "number",
            "nullable": true,
            "description": "Approximation of the total distance (in meters) of the route, taking into account multiple parcels (if any)."
          },
          "cachedTotalRouteDuration": {
            "type": "number",
            "nullable": true,
            "description": "Approximation of the total duration (in seconds) that the driver would have to drive in order to complete the Shipment.\nTakes into account multiple parcels (if any).\n"
          },
          "cachedTotalWithoutTaxes": {
            "type": "number",
            "nullable": true,
            "description": "Total Merchant cost without taxes (in Canadian cents)"
          },
          "cachedTaxes": {
            "type": "object",
            "nullable": true,
            "description": "Details and percentages of the taxes that apply for this Shipment."
          },
          "cachedMerchantAddress": {
            "type": "string",
            "description": "Merchant's address. Example: 9 Slack Rd, Nepean ON K2G 0B7, CA\n"
          },
          "merchantPpid": {
            "type": "string",
            "nullable": true,
            "description": "Partner-provided ID of Shipment's merchant."
          },
          "merchantName": {
            "type": "string",
            "description": "Name of Shipment's merchant."
          },
          "merchantEmail": {
            "type": "string",
            "description": "Merchant's email address."
          },
          "merchantPhone": {
            "type": "string",
            "description": "Merchant's phone number. Example: +1 555 123 1234\n"
          },
          "createdAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "driverAcceptedAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "driverStartedAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "driverArrivedPickupAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "driverPickedUpAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "postedAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "lastBroadcastedAt": {
            "$ref": "#/components/schemas/SimplifiedDateISOString"
          },
          "driverTimeToPickup": {
            "type": "number",
            "nullable": true,
            "description": "Approximate time (in seconds) that the driver must drive from their location (at the moment of accepting) to the pickup address."
          },
          "cancellationAcknowledgedByDriver": {
            "type": "boolean",
            "nullable": true,
            "description": "Whether or not the driver has acknowledged after cancelling."
          },
          "scheduledPostError": {
            "type": "string",
            "description": "If anything goes wrong during scheduling, this will contain human-readable description of the error. Typically, it's empty.",
            "nullable": true
          },
          "postErrors": {
            "type": "array",
            "description": "If anything goes wrong during posting, this will contain details of the errors. Typically, it's an empty array.",
            "nullable": true,
            "items": {
              "type": "object",
              "properties": {
                "date": {
                  "type": "string",
                  "format": "date-time"
                },
                "key": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                },
                "acknowledged": {
                  "type": "boolean"
                },
                "metadata": {
                  "type": "object"
                }
              }
            }
          },
          "currentDriverEstimatedSecondsToPickup": {
            "type": "number",
            "nullable": true,
            "description": "Approximate time (in seconds) that the driver must drive from their current location to the pickup address.\nThis data may be delayed or stale.\nNote the difference between this and driverTimeToPickup - driverTimeToPickup is constant.\nThis will periodically be updated.\n"
          },
          "linkedParentShipment": {
            "type": "object",
            "nullable": true,
            "description": "**(ADDED IN v1.5)**\n\nIf this shipment has a parent shipment then this will contain meta information\nabout its parent shipment ID and the type of the relationship. Otherwise will be null.\n",
            "properties": {
              "shipmentId": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "description": "return_to_sender - this shipment was created as a return\n\nreturn_reusables - this shipment was created as return for reusable containers\n\nclone - this shipment was created as a clone\n\nmoved_orders - this shipment was created by moving to a different shipment\n",
                "enum": [
                  "return_to_sender",
                  "return_reusables",
                  "clone",
                  "moved_orders"
                ]
              }
            }
          },
          "parcels": {
            "type": "array",
            "description": "The parcels that will be delivered in this shipment",
            "minItems": 1,
            "maxItems": 30,
            "items": {
              "$ref": "#/components/schemas/Parcel"
            }
          }
        }
      },
      "ParcelPayload": {
        "description": "Payload object used to identify a parcel",
        "type": "object",
        "properties": {
          "numLabels": {
            "type": "number",
            "minimum": 1,
            "default": 1,
            "description": "**(added in 1.12)** The number of labels for the parcel (each separate package needs a label).\n"
          },
          "deliveryAddress": {
            "$ref": "#/components/schemas/Address"
          },
          "deliveryAddressNotes": {
            "type": "string",
            "description": "Extra notes relating to the delivery address, such as apartment/unit number, reference, description of the location, etc."
          },
          "deliveryInstructions": {
            "type": "string",
            "description": "**(added in 1.4)** Delivery instructions for drop off\n"
          },
          "deliveryName": {
            "type": "string",
            "description": "The name of the recipient"
          },
          "description": {
            "type": "string",
            "description": "Description of the parcel being delivered"
          },
          "orderId": {
            "type": "string",
            "maxLength": 20,
            "description": "The order ID that this parcel belongs to."
          },
          "parcelValue": {
            "type": "number",
            "minimum": 0,
            "description": "The dollar value of the parcel in CDN as cents"
          },
          "deliveryEmail": {
            "type": "string",
            "format": "email",
            "description": "The email address of the recipient"
          },
          "deliveryPhone": {
            "type": "string",
            "description": "The cell phone number of the recipient"
          },
          "requiresPersonHandoff": {
            "type": "boolean",
            "description": "Does this parcel require delivery PIN verification?"
          },
          "containsAlcohol": {
            "type": "boolean",
            "description": "**(ADDED IN v1.8)** Requires legal age verification by law\n"
          },
          "load": {
            "$ref": "#/components/schemas/ParcelLoad"
          },
          "metadata": {
            "type": "object",
            "description": "**(ADDED IN v1.1)**\nThe metadata fields associated to the parcel. If the intent is to\nlist shipments with this metadata field, then ensure the value is\nsaved as a string and not say a number.\n"
          }
        }
      },
      "SpecialParcelFields": {
        "description": "Payload object used to identify special parcel fields",
        "type": "object",
        "properties": {
          "externalId": {
            "type": "string",
            "maxLength": 256,
            "description": "**(ADDED IN v1.2)** The ID of the external entity that is associated to\nthis parcel (e.g. the external order or shipment ID).\n"
          },
          "scanId": {
            "type": "string",
            "maxLength": 256,
            "description": "**(ADDED IN v1.9)** The ID embedded in your custom label’s QR code. If\nnot specified, you will be required to use our built-in labels. If\nspecified, you will not be able to request our built-in label for this\nparcel.\n"
          }
        }
      },
      "CreateShipmentPayload": {
        "description": "Payload object used to create a shipment",
        "type": "object",
        "required": [
          "parcels"
        ],
        "properties": {
          "locationId": {
            "type": "string",
            "description": "Optionally set Location that this Shipment will belong to. Please see [Locations](#tag/Locations)"
          },
          "scheduledPostAt": {
            "type": "string",
            "deprecated": true,
            "description": "**DEPRECATED AS OF v1.21**. \nIf provided, then an approximate pickup time will be determined based on the pickup windows and the scheduledPostAt time.\nIf a pickup time cannot be determined, then the shipment will be created as a draft and an email will be sent off to\nthe merchant asking them to schedule the shipment for pickup.\n\nInstead to schedule a shipment for pickup/delivery use one of the following new fields:\n1) pickup windows (pickupStartAt/pickupEndAt)\n2) delivery windows (deliverStartAt, deliverEndAt)\n"
          },
          "pickupStartAt": {
            "$ref": "#/components/schemas/PickupStartAt"
          },
          "pickupEndAt": {
            "$ref": "#/components/schemas/PickupEndAt"
          },
          "deliverStartAt": {
            "$ref": "#/components/schemas/DeliverStartAt"
          },
          "deliverEndAt": {
            "$ref": "#/components/schemas/DeliverEndAt"
          },
          "pickupAddress": {
            "$ref": "#/components/schemas/Address"
          },
          "pickupAddressNotes": {
            "type": "string",
            "description": "Extra information relating to the pickup address ONLY, like the apartment/unit number."
          },
          "requirements": {
            "$ref": "#/components/schemas/ShipmentRequirements"
          },
          "pickupInstructions": {
            "type": "string",
            "description": "**(RENAMED FROM pickupNotes TO pickupInstructions IN v1.16) pickupNotes will still be accepted**\nSpecial notes or instructions regarding pickup like the description of the location, what door to use, etc.\n"
          },
          "merchantPpid": {
            "type": "string",
            "description": "Partner-provided ID of the merchant. This ID can be used when querying for shipments. Only used by Partner accounts."
          },
          "merchantName": {
            "type": "string",
            "description": "Partner-provided name of the merchant. This will be displayed in place of the merchant name defined in the merchant profile. Only used by Partner accounts."
          },
          "merchantPhone": {
            "type": "string",
            "description": "Partner-provided phone of the merchant. This will be displayed in place of the merchant phone defined in the merchant profile. Only used by Partner accounts."
          },
          "merchantEmail": {
            "type": "string",
            "description": "Partner-provided email of the merchant. This will be displayed in place of the merchant email defined in the merchant profile. Only used by Partner accounts."
          },
          "ignoreTargetDeliveryDuration": {
            "type": "boolean",
            "deprecated": true,
            "description": "**DEPRECATED AS OF v1.18**\n\n~~Ignore the target delivery duration for this shipment only~~\n"
          },
          "parcels": {
            "type": "array",
            "description": "The parcels that will be delivered in this shipment",
            "minItems": 1,
            "maxItems": 30,
            "items": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/ParcelPayload"
                },
                {
                  "$ref": "#/components/schemas/SpecialParcelFields"
                },
                {
                  "type": "object",
                  "required": [
                    "deliveryAddress",
                    "deliveryName",
                    "description",
                    "orderId",
                    "parcelValue"
                  ]
                }
              ]
            }
          }
        }
      },
      "CreateBulkShipmentsStatusResponse": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "description": "A unique identifier for the asynchronous request. This can be used to\nretrieve the results of a request when it has completed.\n"
          },
          "callbackInSeconds": {
            "type": "integer",
            "description": "An estimated number of seconds to complete the request.\nWait this long before checking the status again.\n"
          },
          "isCompleted": {
            "type": "boolean",
            "description": "Specifies if the request has completed."
          }
        }
      },
      "UpdateShipmentPayload": {
        "description": "Payload object describing the changes of a shipment. Optionally, if you want to schedule the shipment, please use exactly one of:\n1) pickup windows (pickupStartAt, pickupEndAt)\n2) delivery windows (deliverStartAt, deliverEndAt)\n",
        "type": "object",
        "properties": {
          "pickupAddress": {
            "$ref": "#/components/schemas/Address"
          },
          "pickupAddressNotes": {
            "type": "string",
            "description": "Extra notes relating to the pickup address, such as apartment/unit number, reference, description of the location, etc."
          },
          "pickupInstructions": {
            "type": "string",
            "description": "**(RENAMED IN v1.16) pickupNotes will still be accepted**\nSpecial notes or instructions regarding pickup\n"
          },
          "requirements": {
            "$ref": "#/components/schemas/ShipmentRequirements"
          },
          "ignoreTargetDeliveryDuration": {
            "type": "boolean",
            "deprecated": true,
            "description": "**DEPRECATED AS OF v1.18**\n\n~~Ignore the target delivery duration for this shipment only~~\n"
          },
          "merchantPpid": {
            "type": "string",
            "description": "Partner-provided ID of the merchant. This ID can be used when querying for shipments. Only used by Partner accounts."
          },
          "merchantName": {
            "type": "string",
            "description": "Partner-provided name of the merchant. This will be displayed in place of the merchant name defined in the merchant profile. Only used by Partner accounts."
          },
          "merchantPhone": {
            "type": "string",
            "description": "Partner-provided phone of the merchant. This will be displayed in place of the merchant phone defined in the merchant profile. Only used by Partner accounts."
          },
          "merchantEmail": {
            "type": "string",
            "description": "Partner-provided email of the merchant. This will be displayed in place of the merchant email defined in the merchant profile. Only used by Partner accounts."
          },
          "scheduledPostAt": {
            "type": "string",
            "deprecated": true,
            "description": "**DEPRECATED AS OF v1.21**.\nIf provided, then an approximate pickup time will be determined based on the pickup windows and the scheduledPostAt time.\nIf a pickup time cannot be determined, then the shipment will not be updated and an email will be sent off to\nthe merchant asking them to schedule the shipment for pickup.\n\nInstead to schedule a shipment for pickup/delivery use one of the following new fields:\n1) pickup windows (pickupStartAt/pickupEndAt)\n2) delivery windows (deliverStartAt, deliverEndAt)\n"
          },
          "pickupStartAt": {
            "$ref": "#/components/schemas/PickupStartAt"
          },
          "pickupEndAt": {
            "$ref": "#/components/schemas/PickupEndAt"
          },
          "deliverStartAt": {
            "$ref": "#/components/schemas/DeliverStartAt"
          },
          "deliverEndAt": {
            "$ref": "#/components/schemas/DeliverEndAt"
          }
        }
      },
      "TrackingUrlResponse": {
        "description": "Tracking URL Response",
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "trackingUrl": {
                "type": "string"
              }
            }
          }
        }
      },
      "ShippingLabelJSONResponse": {
        "description": "Response if `deliveryIndex` is not specified and `Accept` header is `application/json`.",
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "base64image": {
                "description": "base64 contents of the shipping label (png image).",
                "type": "string"
              }
            }
          }
        }
      },
      "RoutingStatusResponse": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "description": "A unique identifier for the asynchronous request. This can be used to retrieve the results\nof a request when it has completed.\n"
          },
          "callbackInSeconds": {
            "type": "integer",
            "description": "An estimated number of seconds to complete the request.\nWait this long before checking the status again.\n"
          },
          "isAccepted": {
            "type": "boolean",
            "description": "Specifies if the request is accepted. A request will not be accepted\nif it is not valid.\n"
          },
          "isCompleted": {
            "type": "boolean",
            "description": "Specifies if the request has completed."
          }
        }
      },
      "RoutingResultResponse": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "description": "The message of the error"
                },
                "code": {
                  "type": "string",
                  "enum": [
                    "DELIVERY_TOO_FAR",
                    "PICKUP_OUTSIDE_SERVICE_AREA",
                    "DELIVERY_NO_GEOCODE",
                    "PICKUP_NO_GEOCODE",
                    "SYSTEM_ERROR"
                  ],
                  "description": "The error code that identifies the error"
                },
                "orderId": {
                  "type": "string",
                  "description": "The \"orderId\" of the parcel this error relates to"
                },
                "params": {
                  "type": "object",
                  "description": "An object that contains extra information related to the error (i.e. address, etc. )\n"
                }
              }
            }
          },
          "result": {
            "type": "object",
            "properties": {
              "shipments": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Shipment"
                }
              },
              "unassignedOrders": {
                "type": "array",
                "description": "Array of order IDs that could not be assigned to a shipment due to\ndelivery contraints or an error occurred when validating the parcel\n",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "ParcelResponse": {
        "description": "The parcel reponse object",
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/Parcel"
          }
        }
      },
      "WebhookEventName": {
        "type": "string",
        "enum": [
          "shipment.created",
          "shipment.updated",
          "shipment.deleted",
          "shipment.posted",
          "shipment.driver.accepted",
          "shipment.driver.arrived_at_pickup",
          "shipment.driver.picked_up",
          "shipment.driver.arrived_at_delivery",
          "shipment.driver.parcel_delivered",
          "shipment.completed",
          "shipment.cancelled",
          "shipment.driver.renounced",
          "shipment.on_hold",
          "parcel.picked_up",
          "parcel.delivered",
          "parcel.returning",
          "parcel.returned"
        ]
      },
      "Webhook": {
        "description": "A registered webhook",
        "properties": {
          "id": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "merchantId": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "merchant-webhook"
            ]
          },
          "eventName": {
            "$ref": "#/components/schemas/WebhookEventName"
          },
          "url": {
            "type": "string",
            "format": "uri"
          }
        }
      },
      "ShipmentWebhookPayload": {
        "description": "Webhook payload during a shipment event.",
        "required": [
          "data",
          "timestamp"
        ],
        "properties": {
          "timestamp": {
            "description": "**(ADDED IN v1.11)** Date time the event took place in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n",
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/Shipment"
          }
        }
      },
      "ParcelWebhookPayload": {
        "description": "Webhook payload during a parcel event.",
        "required": [
          "data",
          "timestamp"
        ],
        "properties": {
          "timestamp": {
            "description": "**(ADDED IN v1.11)** Date time the event took place in Simplified ISO8601 format YYYY-MM-DDTHH:mm:ss.sssZ\n\nNote that ISO date strings are always in UTC time.\n\nAn example: 2020-07-25T10:48:08.987Z\n",
            "type": "string"
          },
          "data": {
            "properties": {
              "shipmentId": {
                "type": "string",
                "description": "The ID of the shipment containing the parcel affected. In the case of a return, this ID will be for the newly created return shipment."
              },
              "deliveryIndex": {
                "type": "integer",
                "description": "The index of the parcel affected within the shipment."
              },
              "orderUuid": {
                "type": "string",
                "description": "The Trexity generated unique identifier for the parcel/order."
              },
              "parcel": {
                "$ref": "#/components/schemas/Parcel"
              }
            }
          }
        }
      },
      "MerchantLocation": {
        "description": "A Merchant Location",
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "disabledAt": {
            "type": "string",
            "format": "date-time"
          },
          "disabledReason": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "address": {
            "type": "string"
          },
          "addressNotes": {
            "type": "string"
          },
          "addressLocation": {
            "$ref": "#/components/schemas/Location"
          },
          "addressProvince": {
            "type": "string"
          },
          "addressCountry": {
            "type": "string"
          },
          "addressCity": {
            "type": "string"
          },
          "addressServiceCity": {
            "type": "string"
          },
          "contactEmail": {
            "type": "string",
            "format": "email"
          },
          "contactName": {
            "type": "string",
            "format": "email"
          },
          "contactPhone": {
            "type": "string"
          },
          "contactTitle": {
            "type": "string"
          },
          "availableRequirements": {
            "type": "object"
          },
          "billingContactEmail": {
            "type": "string"
          },
          "timezone": {
            "type": "string"
          },
          "defaultRequiresPersonHandoff": {
            "type": "boolean"
          },
          "defaultContainsAlcohol": {
            "type": "boolean"
          },
          "defaultDeliveryInstructions": {
            "type": "string"
          },
          "defaultPickupInstructions": {
            "type": "string"
          },
          "lifetimeDeliveryCount": {
            "type": "number"
          },
          "lifetimeShipmentsCount": {
            "type": "number"
          },
          "lastDeliveredAt": {
            "type": "string",
            "format": "date-time"
          },
          "operatingHours": {
            "type": "object"
          }
        }
      },
      "ReceiptItem": {
        "description": "A receipt item that is part of a receipt",
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "charge",
              "invoice",
              "penalty",
              "refund"
            ],
            "description": "The type of the receipt item"
          },
          "locationName": {
            "type": "string",
            "description": "The name of the location this receipt item is associated with",
            "example": "My Shop"
          },
          "locationTimeZone": {
            "type": "string",
            "description": "The location time zone IANA identifier",
            "example": "America/Toronto"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "example": "2022-12-12T15:21:19.564Z"
          },
          "description": {
            "type": "string",
            "description": "The invoice number or route ID the receipt item is associated with",
            "example": "TRX275915694-K0W"
          },
          "note": {
            "type": "string",
            "description": "The reason for the transaction",
            "example": ""
          },
          "orderIds": {
            "type": "array",
            "description": "The order IDs associated with the receipt item",
            "minItems": 1,
            "items": {
              "type": "string",
              "example": "WPFNKFYH-9469"
            }
          },
          "cost": {
            "type": "integer",
            "description": "The cost of the receipt item in cents",
            "example": 2800
          },
          "additions": {
            "type": "array",
            "description": "Array of surcharges and discounts, where discounts will have a negative amount",
            "items": {
              "type": "object",
              "properties": {
                "description": {
                  "type": "string",
                  "description": "User friendly description",
                  "example": "Fuel surcharge"
                },
                "amount": {
                  "type": "integer",
                  "description": "The amount of the addition in cents",
                  "example": 57
                }
              }
            }
          },
          "subtotal": {
            "type": "integer",
            "description": "Receipt item subtotal (cost + additions) in cents",
            "example": 2857
          },
          "taxesPaid": {
            "type": "integer",
            "description": "Receipt item taxes in cents",
            "example": 371
          },
          "totalPaid": {
            "type": "integer",
            "description": "Receipt item total (subtotal + taxesPaid) in cents",
            "example": 3228
          }
        }
      },
      "ReceiptResponse": {
        "description": "The receipt items for a receipt",
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "receiptItems": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/ReceiptItem"
                }
              }
            }
          }
        }
      }
    },
    "responses": {
      "FileResponse": {
        "description": "Returns the binary content of the file in question.\n\nPlease note that our storage endpoints provide [ETag](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag) header for caching purposes.\n",
        "content": {
          "application/octet-stream": {
            "schema": {
              "type": "string",
              "format": "binary"
            }
          }
        }
      }
    },
    "parameters": {
      "x-trexity-signature": {
        "name": "x-trexity-signature",
        "in": "header",
        "description": "The SHA256 HMAC signature for the request.",
        "schema": {
          "type": "string"
        }
      },
      "x-trexity-event-name": {
        "name": "x-trexity-event-name",
        "in": "header",
        "description": "Webhook event name.",
        "schema": {
          "$ref": "#/components/schemas/WebhookEventName"
        }
      },
      "x-trexity-webhook-order-id": {
        "name": "x-trexity-webhook-order-id",
        "in": "header",
        "description": "The webhook processing sort order. Webhooks may not be delivered in order, but this value can be used to determine processing order.",
        "schema": {
          "type": "integer"
        }
      }
    }
  },
  "security": [
    {
      "MerchantApiKeyAuth": []
    },
    {
      "AccessTokenAuth": []
    }
  ],
  "paths": {
    "/addresses/check": {
      "get": {
        "operationId": "checkAddress",
        "tags": [
          "Addresses"
        ],
        "summary": "Check an address",
        "description": "**(ADDED IN v1.1)**\n\nChecks an address and returns a result that identifies if the address can be\nused as a pickup address/business address, and what delivery classification it\nfalls under.\n\n### Rate Limiting\n\nThis operation can be requested without authentication, however it will have a\nstrict rate limit of 3 requests every 10 seconds.\n\nHowever, authenticated requests can request 12 times every 10 seconds.\n",
        "security": [
          {},
          {
            "MerchantApiKeyAuth": []
          },
          {
            "AccessTokenAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "address",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The address to check.",
            "example": "123 Fake St, Ottawa ON K2G 6F2, CA"
          },
          {
            "in": "query",
            "name": "pickupAddress",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "The pickup address from which to generate the tiered zones.",
            "example": "123 Fake St, Ottawa ON K2G 6F2, CA"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "pickup": {
                          "type": "boolean",
                          "description": "If `true` then the address can be used as a pickup address (or business address)."
                        },
                        "delivery": {
                          "type": "string",
                          "enum": [
                            "none",
                            "normal",
                            "extended",
                            "tier-1",
                            "tier-2",
                            "tier-3"
                          ],
                          "description": "The delivery classification of the address.\n\n`none` = The address is outside a known delivery zone and is unserviceable.\n\n`normal` = The address is serviceable and normal delivery rates apply.\n\n`extended` = The address is serviceable and surcharges may apply.\n\n`tier-1` = (only if pickupAddress is specified) The address belongs to 'tier-1' delivery tier.\n\n`tier-2` = (only if pickupAddress is specified) The address belongs to 'tier-2' delivery tier.\n\n`tier-3` = (only if pickupAddress is specified) The address belongs to 'tier-3' delivery tier.\n"
                        },
                        "lngLat": {
                          "type": "object",
                          "description": "**(ADDED IN v1.3)**\n\nThe latitude and logitude of the checked address.\n",
                          "properties": {
                            "longitude": {
                              "type": "number",
                              "description": "Longitude of the address"
                            },
                            "latitude": {
                              "type": "number",
                              "description": "Latitude of the address"
                            }
                          }
                        },
                        "serviceCity": {
                          "type": "string",
                          "description": "**(ADDED IN v1.3)**\n\nService city that the address is located. Provided in the format: \"(city name), (2 letter abbreviation of province)\" (may or may not be supported by Trexity)\n"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Address could not be recognized as a valid address. Review address and ensure all address components are present and follow formatting guide."
          },
          "429": {
            "description": "The request has been rate limited. Try making the request again after the rate limit window."
          },
          "500": {
            "description": "Server error. Try making the request again."
          }
        }
      }
    },
    "/rates/simple": {
      "post": {
        "operationId": "getSimpleRate",
        "tags": [
          "Shipping Rates"
        ],
        "summary": "Simple rate",
        "description": "Calculate the rate for a direct shipment from a single pickup address to a\nsingle delivery address.\n\nReturns the estimated distance (in meters), estimated travel duration (in\nseconds), and fee from the pickup address to the delivery address.\n\nIf no `pickupAddress` is specified then the merchant's business address will\nbe used as the pickup address.\n\n**(ADDED IN v1.7)** Review the [Usage Policy](/#section/Usage-Policy).\n\n**(ADDED IN v1.8)** Use this endpoint for direct shipment rates (single pickup\naddress and single delivery address), and use the new [Complex Rate](/#operation/createComplexRateRequest)\nendpoint for multiple delivery addresses.\n\nThe rate response will now include estimates for post, pickup, and delivery time.\nAdditionally, the new properties `pickupAfter`, `deliverAfter` and `deliverBefore` can be provided to indicate a\ndelivery window. Otheriwse the next available delivery window (i.e. ASAP) is assumed. Use the estimated values\nin the response when creating the shipment.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X POST {server-url}/rates/simple\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\\\n  -d '{\n    \"pickupAddress\": \"456 Elgin St, Ottawa ON K2P 1N5, CA\",\n    \"deliveryAddress\": \"225 Preston St, Ottawa ON K1R 7R1, CA\",\n    \"requirements\": {\n      \"legalAgeAlcohol\": true\n    },\n    \"orderValue\": 2500\n  }'\n"
          }
        ],
        "requestBody": {
          "description": "Payload that minimally describes a direct shipment.",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimpleRatePayload"
              },
              "example": {
                "pickupAddress": "456 Elgin Street, Ottawa ON K2P 1N5, CA",
                "deliveryAddress": "225 Preston St, Ottawa ON K1R 7R1, CA",
                "requirements": {
                  "legalAgeAlcohol": true
                },
                "orderValue": 2500
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimpleRateResponse"
                },
                "examples": {
                  "Can Deliver": {
                    "value": {
                      "data": [
                        {
                          "totalWithoutTaxes": 1688,
                          "name": "Local Delivery",
                          "description": "by Trexity",
                          "taxRates": {
                            "HST": 0.13
                          },
                          "pickupDeliveryDuration": 2121,
                          "pickupDeliveryDistance": 17172,
                          "directionsResult": {
                            "features": [
                              {
                                "geometry": {
                                  "type": "LineString",
                                  "coordinates": [
                                    [
                                      -75.72048,
                                      45.32606
                                    ],
                                    [
                                      -75.72022,
                                      45.32575
                                    ],
                                    [
                                      -75.72007,
                                      45.32555
                                    ],
                                    [
                                      -75.72038,
                                      45.32544
                                    ],
                                    [
                                      -75.72209,
                                      45.32479
                                    ],
                                    [
                                      -75.72319,
                                      45.32436
                                    ],
                                    [
                                      -75.72502,
                                      45.32366
                                    ],
                                    [
                                      -75.72764,
                                      45.32266
                                    ],
                                    [
                                      -75.7343,
                                      45.32012
                                    ],
                                    [
                                      -75.73699,
                                      45.31907
                                    ],
                                    [
                                      -75.73815,
                                      45.31863
                                    ],
                                    [
                                      -75.73974,
                                      45.31802
                                    ],
                                    [
                                      -75.73994,
                                      45.31801
                                    ],
                                    [
                                      -75.74025,
                                      45.31792
                                    ],
                                    [
                                      -75.7417,
                                      45.31735
                                    ],
                                    [
                                      -75.74183,
                                      45.3173
                                    ],
                                    [
                                      -75.7422,
                                      45.31788
                                    ],
                                    [
                                      -75.74249,
                                      45.31834
                                    ],
                                    [
                                      -75.74303,
                                      45.31918
                                    ],
                                    [
                                      -75.74357,
                                      45.32011
                                    ],
                                    [
                                      -75.74428,
                                      45.32132
                                    ],
                                    [
                                      -75.7446,
                                      45.32186
                                    ],
                                    [
                                      -75.74507,
                                      45.32262
                                    ],
                                    [
                                      -75.74675,
                                      45.32537
                                    ],
                                    [
                                      -75.7486,
                                      45.32835
                                    ],
                                    [
                                      -75.74912,
                                      45.32923
                                    ],
                                    [
                                      -75.74962,
                                      45.33001
                                    ],
                                    [
                                      -75.75044,
                                      45.33134
                                    ],
                                    [
                                      -75.75067,
                                      45.33167
                                    ],
                                    [
                                      -75.7511,
                                      45.33242
                                    ],
                                    [
                                      -75.75171,
                                      45.33339
                                    ],
                                    [
                                      -75.75201,
                                      45.33394
                                    ],
                                    [
                                      -75.75287,
                                      45.3355
                                    ],
                                    [
                                      -75.75375,
                                      45.33713
                                    ],
                                    [
                                      -75.75483,
                                      45.33911
                                    ],
                                    [
                                      -75.75518,
                                      45.33977
                                    ],
                                    [
                                      -75.75584,
                                      45.34089
                                    ],
                                    [
                                      -75.75655,
                                      45.34206
                                    ],
                                    [
                                      -75.7569,
                                      45.34268
                                    ],
                                    [
                                      -75.75786,
                                      45.34434
                                    ],
                                    [
                                      -75.75866,
                                      45.34572
                                    ],
                                    [
                                      -75.75942,
                                      45.34698
                                    ],
                                    [
                                      -75.76006,
                                      45.34809
                                    ],
                                    [
                                      -75.76026,
                                      45.34836
                                    ],
                                    [
                                      -75.76049,
                                      45.34861
                                    ],
                                    [
                                      -75.76117,
                                      45.34926
                                    ],
                                    [
                                      -75.76187,
                                      45.34995
                                    ],
                                    [
                                      -75.7621,
                                      45.35022
                                    ],
                                    [
                                      -75.76231,
                                      45.3505
                                    ],
                                    [
                                      -75.76283,
                                      45.35145
                                    ],
                                    [
                                      -75.76295,
                                      45.35166
                                    ],
                                    [
                                      -75.76363,
                                      45.35288
                                    ],
                                    [
                                      -75.76475,
                                      45.35486
                                    ],
                                    [
                                      -75.76566,
                                      45.3565
                                    ],
                                    [
                                      -75.76625,
                                      45.35759
                                    ],
                                    [
                                      -75.76727,
                                      45.35935
                                    ],
                                    [
                                      -75.76763,
                                      45.36002
                                    ],
                                    [
                                      -75.76761,
                                      45.36012
                                    ],
                                    [
                                      -75.76766,
                                      45.36027
                                    ],
                                    [
                                      -75.76769,
                                      45.36053
                                    ],
                                    [
                                      -75.76768,
                                      45.36066
                                    ],
                                    [
                                      -75.76764,
                                      45.3608
                                    ],
                                    [
                                      -75.76757,
                                      45.36094
                                    ],
                                    [
                                      -75.76747,
                                      45.36107
                                    ],
                                    [
                                      -75.76727,
                                      45.36126
                                    ],
                                    [
                                      -75.766,
                                      45.36212
                                    ],
                                    [
                                      -75.76479,
                                      45.36289
                                    ],
                                    [
                                      -75.76477,
                                      45.36291
                                    ],
                                    [
                                      -75.76474,
                                      45.36299
                                    ],
                                    [
                                      -75.76451,
                                      45.36312
                                    ],
                                    [
                                      -75.76389,
                                      45.36345
                                    ],
                                    [
                                      -75.76335,
                                      45.36374
                                    ],
                                    [
                                      -75.76238,
                                      45.36425
                                    ],
                                    [
                                      -75.76147,
                                      45.36474
                                    ],
                                    [
                                      -75.75969,
                                      45.3657
                                    ],
                                    [
                                      -75.75897,
                                      45.36618
                                    ],
                                    [
                                      -75.75838,
                                      45.36665
                                    ],
                                    [
                                      -75.75665,
                                      45.36833
                                    ],
                                    [
                                      -75.75444,
                                      45.37044
                                    ],
                                    [
                                      -75.74848,
                                      45.37595
                                    ],
                                    [
                                      -75.74274,
                                      45.3812
                                    ],
                                    [
                                      -75.73835,
                                      45.38522
                                    ],
                                    [
                                      -75.73816,
                                      45.3854
                                    ],
                                    [
                                      -75.73737,
                                      45.38611
                                    ],
                                    [
                                      -75.73613,
                                      45.38726
                                    ],
                                    [
                                      -75.73556,
                                      45.38785
                                    ],
                                    [
                                      -75.73516,
                                      45.38828
                                    ],
                                    [
                                      -75.73463,
                                      45.38892
                                    ],
                                    [
                                      -75.73369,
                                      45.39013
                                    ],
                                    [
                                      -75.73317,
                                      45.39084
                                    ],
                                    [
                                      -75.73228,
                                      45.39198
                                    ],
                                    [
                                      -75.7309,
                                      45.39371
                                    ],
                                    [
                                      -75.72964,
                                      45.39524
                                    ],
                                    [
                                      -75.72912,
                                      45.39574
                                    ],
                                    [
                                      -75.72856,
                                      45.39622
                                    ],
                                    [
                                      -75.7281,
                                      45.39654
                                    ],
                                    [
                                      -75.72744,
                                      45.39691
                                    ],
                                    [
                                      -75.72456,
                                      45.39828
                                    ],
                                    [
                                      -75.72286,
                                      45.39906
                                    ],
                                    [
                                      -75.72178,
                                      45.39954
                                    ],
                                    [
                                      -75.72093,
                                      45.39989
                                    ],
                                    [
                                      -75.71979,
                                      45.40034
                                    ],
                                    [
                                      -75.71849,
                                      45.4008
                                    ],
                                    [
                                      -75.71714,
                                      45.40125
                                    ],
                                    [
                                      -75.71549,
                                      45.40175
                                    ],
                                    [
                                      -75.71453,
                                      45.40201
                                    ],
                                    [
                                      -75.71334,
                                      45.40231
                                    ],
                                    [
                                      -75.7124,
                                      45.40253
                                    ],
                                    [
                                      -75.71094,
                                      45.40285
                                    ],
                                    [
                                      -75.70871,
                                      45.40328
                                    ],
                                    [
                                      -75.70661,
                                      45.4037
                                    ],
                                    [
                                      -75.70437,
                                      45.40419
                                    ],
                                    [
                                      -75.70303,
                                      45.40453
                                    ],
                                    [
                                      -75.70176,
                                      45.40488
                                    ],
                                    [
                                      -75.70002,
                                      45.4054
                                    ],
                                    [
                                      -75.69832,
                                      45.40596
                                    ],
                                    [
                                      -75.69703,
                                      45.40644
                                    ],
                                    [
                                      -75.69667,
                                      45.4065
                                    ],
                                    [
                                      -75.69615,
                                      45.40668
                                    ],
                                    [
                                      -75.69523,
                                      45.40701
                                    ],
                                    [
                                      -75.69409,
                                      45.40741
                                    ],
                                    [
                                      -75.69383,
                                      45.40752
                                    ],
                                    [
                                      -75.69363,
                                      45.40763
                                    ],
                                    [
                                      -75.69346,
                                      45.40781
                                    ],
                                    [
                                      -75.69341,
                                      45.40792
                                    ],
                                    [
                                      -75.69339,
                                      45.40803
                                    ],
                                    [
                                      -75.69339,
                                      45.40817
                                    ],
                                    [
                                      -75.69344,
                                      45.40831
                                    ],
                                    [
                                      -75.69363,
                                      45.40857
                                    ],
                                    [
                                      -75.69383,
                                      45.40879
                                    ],
                                    [
                                      -75.69389,
                                      45.40895
                                    ],
                                    [
                                      -75.6941,
                                      45.40922
                                    ],
                                    [
                                      -75.69476,
                                      45.41006
                                    ],
                                    [
                                      -75.69579,
                                      45.41129
                                    ],
                                    [
                                      -75.69797,
                                      45.41383
                                    ],
                                    [
                                      -75.69912,
                                      45.41515
                                    ],
                                    [
                                      -75.70019,
                                      45.41642
                                    ],
                                    [
                                      -75.70101,
                                      45.41743
                                    ],
                                    [
                                      -75.7019,
                                      45.41845
                                    ],
                                    [
                                      -75.70106,
                                      45.4188
                                    ],
                                    [
                                      -75.69873,
                                      45.4198
                                    ],
                                    [
                                      -75.69724,
                                      45.42044
                                    ],
                                    [
                                      -75.69662,
                                      45.4207
                                    ]
                                  ]
                                },
                                "type": "Feature",
                                "properties": {
                                  "bounds": {
                                    "northeast": {
                                      "lat": 45.4207038,
                                      "lng": -75.6933862
                                    },
                                    "southwest": {
                                      "lat": 45.3172975,
                                      "lng": -75.7676887
                                    }
                                  }
                                }
                              }
                            ],
                            "type": "FeatureCollection"
                          },
                          "total": 1908
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Input error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "nullable": true
                    },
                    "params": {
                      "type": "object",
                      "nullable": true
                    },
                    "code": {
                      "type": "string",
                      "nullable": true,
                      "description": "Unexhaustive list of codes.\n\n- `invalid-merchant-requirements` = When the requirements specified don't match the requirements granted to the merchant\n- `pickup-address-unserviceable` = When the pickup address cannot be matched to any of the merchant's locations\n- `invalid-pickup-address` = When the pickup address is invalid\n- `pickup-point-outside-zone` = When the pickup address is outside Trexity's service area\n- `invalid-data-payload` = When there are issues with the input data provided\n- `num-labels-too-large` = When numLabels is too large\n- `time-constraint-violation` = When the delivery/pickup time constraints specified cannot be met\n"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "No rates",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "minItems": 0,
                      "maxItems": 0,
                      "items": {
                        "$ref": "#/components/schemas/SimpleRate"
                      }
                    },
                    "error": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string"
                        },
                        "code": {
                          "type": "string",
                          "description": "Unexhaustive list of codes.\n\n- `service-unavailable` = When API Service Availability Rules in merchant portal prevent rates from being returned\n- `time-constraint-violation` = When the constraint specified by pickupAfter, or deliverAfter and/or deliverBefore cannot be met\n- `post-date-outside-operating-hours` = When the estimated post date is outside Trexity's or the merchant's operating hours\n- `delivery-date-outside-operating-hours` = When the estimated delivery date is outside Trexity's or the merchant's operating hours\n- `pickup-address-outsidetaxboundary` = When the pickup address is outside the province/state of the merchant's location\n- `merchant-disabled` = When the merchant account has been disabled\n- `missing-profile-details` = When the merchant profile is incomplete\n- `delivery-point-outside-zone` = When the delivery address is outside Trexity's service area\n- `pickup-point-outside-zone` = When the pickup address is outside Trexity's service area\n"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "nullable": true
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/rates/complex": {
      "post": {
        "operationId": "createComplexRateRequest",
        "tags": [
          "Shipping Rates"
        ],
        "summary": "Create complex rate request",
        "description": "**(CHANGE AS OF JUNE 1, 2023)** scheduledPostAt is considered deprecated. It is still supported, but at some point in the future, it will not be.\nIf you want to schedule a shipment, please use exactly one of:\n  1) pickupStartAt and an optional pickupEndAt (when to pickup by)\n  2) deliverStartAt and an optional deliverEndAt (when to deliver by)\n\nIf providing a value for `scheduledPostAt` then an approximate value for `pickupStartAt` will attempt to be calculated. If an appproximation\ncannot be determined, then no complex rate will be returned and an error will be returned.\n\n---\n\nQueue a list of shipments for an optimally routed rate.\n\nThe typical use case of this API is to provide multiple shipments (pickup &\ndelivery) to this endpoint, which responds with a request ID to be polled\nasynchronously using the [Complex Rate status](/#operation/getComplexRateStatus)\nendpoint, and ultimately retrieving the rate using the [Complex Rate result](/#operation/getComplexRateResult)\nendpoint.\n\nOptionally, you can then take the rate ID provided in the rate result and\nhave the shipments created in bulk using the [Bulk Shipment Creation](/#operation/createCreateBulkShipmentsRequest)\nendpoint.\n\n**Order ID**\n\nFor each parcel across all shipments provided to this endpoint, the\n`orderId` must be unique. This allows us to refer back to the parcel by\n`orderId` in the result `errors` array.\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "shipments"
                ],
                "properties": {
                  "locationId": {
                    "type": "string",
                    "description": "Optionally attach a Location to this request. Will be set to default if not specified. Please see [Locations](#tag/getLocations)."
                  },
                  "shipments": {
                    "type": "array",
                    "minItems": 1,
                    "maxItems": 400,
                    "items": {
                      "$ref": "#/components/schemas/DirectShipmentPayload"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully queued an asynchronous complex rate request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ComplexRateStatusResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input provided",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      }
    },
    "/rates/complex/{requestId}": {
      "get": {
        "operationId": "getComplexRateStatus",
        "tags": [
          "Shipping Rates"
        ],
        "summary": "Get complex rate request status",
        "description": "Get the status of an asynchronous complex rate request",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The asynchronous complex rate request ID"
          }
        ],
        "responses": {
          "200": {
            "description": "The status of an asynchronous complex rate request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ComplexRateStatusResponse"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      }
    },
    "/rates/complex/{requestId}/result": {
      "get": {
        "operationId": "getComplexRateResult",
        "tags": [
          "Shipping Rates"
        ],
        "summary": "Get complex rate result",
        "description": "Get the result of a completed asynchronous complex rate request",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The asynchronous complex rate request ID"
          }
        ],
        "responses": {
          "200": {
            "description": "The result of a completed asynchronous complex rate request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ComplexRateResultResponse"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Asynchronous complex rate request is not complete yet"
          }
        }
      }
    },
    "/shipments": {
      "post": {
        "operationId": "createShipment",
        "tags": [
          "Shipments"
        ],
        "summary": "Create a shipment",
        "description": "**(CHANGE AS OF NOVEMBER 20, 2023)** The concept of a \"service type\" was introduced\nand will by default have no change on the API. However, each merchant location from\nthe Merchant portal can have the default service type changed to \"Trexity Select\".\n\nWhen the default service type is set to \"Trexity Select\" from the Merchant UI for a location\nthen the following changes apply:\n- The \"containsAlcohol\" field will not be able to be set to \"true\".\n- The \"requirements.perishable\" field will not be able to be set to \"true\".\n- The \"requirements.returnReusables\" field will not be able to be set to \"true\".\n- The Parcel \"requiresPersonHandoff\" field will not be able to be set to \"true\".\n- The supported pickup windows will change as outlined in this article.\n\n**(CHANGE AS OF JUNE 1, 2023)** scheduledPostAt is considered deprecated. It is still supported, but at some point in the future, it will not be.\nIf you want to schedule a shipment, please use exactly one of:\n  1) pickupStartAt and an optional pickupEndAt (when to pickup by)\n  2) deliverStartAt and an optional deliverEndAt (when to deliver by)\n\nIf providing a value for `scheduledPostAt` then an approximate value for `pickupStartAt` will attempt to be calculated. If an appproximation\ncannot be determined, then the shipment will be created as a draft and an email will be sent off to the merchant asking them to schedule\nthe shipment for pickup.\n\n---\n\nCreate a new shipment.\n\nIf no `pickupAddress` is specified then the merchant's business address will be used as the pickup address.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X POST {server-url}/shipments\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\\\n  -d '{\n    \"pickupAddress\": \"9 Slack Rd, Nepean ON K2G 0B7, CA\",\n    \"pickupAddressNotes\": \"Unit 1, ring the buzzer.\",\n    \"pickupInstructions\": \"Please be careful, since it may contain fragile things!\",\n    \"requirements\": {},\n    \"parcels\": [\n      {\n        \"deliveryAddress\": \"207 Queen St, Ottawa ON K1P 6E5, CA\",\n        \"deliveryName\": \"Srinivasa Ramanujan\",\n        \"description\": \"Glasses, bifocals\",\n        \"orderId\": \"BFG10K\",\n        \"parcelValue\": 10000\n      }\n    ]\n  }'\n"
          }
        ],
        "requestBody": {
          "description": "Payload describing your shipment",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateShipmentPayload"
              },
              "examples": {
                "ImmediateInit": {
                  "value": {
                    "pickupAddress": "9 Slack Rd, Nepean ON K2G 0B7, CA",
                    "pickupInstructions": "Please be careful, since it may contain fragile things!",
                    "requirements": {},
                    "parcels": [
                      {
                        "deliveryAddress": "207 Queen St, Ottawa ON K1P 6E5, CA",
                        "deliveryName": "Srinivasa Ramanujan",
                        "description": "Glasses, bifocals",
                        "orderId": "BFG10K",
                        "parcelValue": 10000
                      }
                    ]
                  }
                },
                "ScheduledInit": {
                  "value": {
                    "pickupAddress": "207 Queen St, Ottawa ON K1P 6E5, CA",
                    "pickupInstructions": "Please be careful, since it may contain fragile things!",
                    "requirements": {},
                    "scheduledPostAt": "2020-07-25T10:16:11.048Z",
                    "parcels": [
                      {
                        "deliveryAddress": "343 Booth St, Ottawa ON K1R 7K1, CA",
                        "deliveryName": "Lagrange",
                        "description": "Copy of Newtons Principia Mathematica",
                        "orderId": "NWTNRULZ",
                        "parcelValue": 15000
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "shipmentId": {
                          "type": "string"
                        },
                        "parcels": {
                          "type": "array",
                          "description": "**(ADDED IN v1.25)** The IDs of the parcels that were created as part of this shipment.\n",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "Success": {
                    "value": {
                      "data": {
                        "shipmentId": "TRX973036599-6KL",
                        "parcels": [
                          {
                            "id": "123e4567-e89b-12d3-a456-426614174000"
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid payload or permission denied.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "nullable": true
                    },
                    "params": {
                      "type": "object",
                      "nullable": true
                    },
                    "code": {
                      "type": "string",
                      "nullable": true,
                      "description": "Unexhaustive list of codes.\n\n- `unauthorized-requirements` = When the requirements specified don't match the requirements granted to the merchant\n- `pickup-address-unserviceable` = When the pickup address cannot be matched to any of the merchant's locations\n- `invalid-pickup-address` = When the pickup address is invalid\n- `invalid-delivery-address` = When the delivery address is invalid\n- `pickup-point-outside-zone` = When the pickup address is outside Trexity's service area\n- `invalid-input` = When there are issues with the input data provided\n- `invalid-shipment-data` = When there are issues with the input data provided and the shipment entity cannot be instantiated\n- `num-labels-too-large` = When numLabels is too large\n- `invalid-scanids` = When the scanId specified is already in use\n- `outside-operating-hours` = When the pickup or delivery time specified is outside the your delivery hours or Trexity's service hours\n- `invalid-scheduled-posting-date` = The scheduling fields are invalid and do not describe a valid pickup window\n- `unauthorized-numlabels` = When total numLabels for the entire shipment is too large\n- `pickup-address-outsidetaxboundary` = The pickup address is outside the merchant's location province\n- `merchant-disabled` = The merchant has been disabled\n- `missing-profile-details` = The merchant has an incomplete profile\n- `no-shipment-rate` = A shipment rate failed to be calculated due to delivery or pickup address geofencing error\n"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      },
      "get": {
        "operationId": "getShipments",
        "tags": [
          "Shipments"
        ],
        "summary": "List shipments",
        "description": "List shipments that match the specified filters.\n\n## Filtering By Dates\n\nWhen filtering by a date range both the `fromDate` and `toDate` query parameters must be provided.\n\n## Filtering By External ID\n\nWhen filtering by a parcel's external ID you **cannot filter by dates**. Filtering by dates and external ID are mutually exclusive filters. If `externalId` is specified it will take precendence.\n**(ADDED IN v1.2)**\n\n## Filtering By Parcel Metadata\n**(DEPRECATED AS OF v1.2)**\n\n~~Parcel metadata fields can be filtered on by using query parameters with the following pattern `meta_{fieldName}`.~~\n\n~~Additionally, the metadata field must have been saved as a string, and not a number for example. This is required since\nthe query parameter value is not converted to a number.~~\n\n~~Example: `https://{server-url}/shipments?meta_partnerShipmentId=someid`~~\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/shipments\n  -H 'Content-Type: application/json'\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "select",
            "schema": {
              "type": "string"
            },
            "description": "**(ADDED IN v1.22)** The comma-separated list of fields to include in the shipment response (if not specified or blank then all fields will be included).\n\nIf a field is specified that is not defined by the Shipment object, then responds with HTTP 400. Only top-level fields are supported.\n"
          },
          {
            "in": "query",
            "name": "fromDate",
            "schema": {
              "$ref": "#/components/schemas/SimplifiedDateISOString"
            }
          },
          {
            "in": "query",
            "name": "toDate",
            "schema": {
              "$ref": "#/components/schemas/SimplifiedDateISOString"
            }
          },
          {
            "in": "query",
            "name": "externalId",
            "schema": {
              "type": "string",
              "maxLength": 256,
              "description": "**(ADDED IN v1.2)** The ID of the external entity that is associated to this parcel (e.g. the external order or shipment ID).\n"
            }
          },
          {
            "in": "query",
            "name": "merchantPpid",
            "deprecated": true,
            "description": "**(DEPRECATED AS OF v1.1)**\n",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Shipment"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Select contains a field not in a Shipment object, query params invalid, or permission denied.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "description": "The error message",
                      "example": "Invalid data payload"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/shipments/bulk/{rateId}": {
      "post": {
        "operationId": "createCreateBulkShipmentsRequest",
        "tags": [
          "Shipments"
        ],
        "summary": "Create bulk shipment creation request",
        "description": "**(ADDED IN v1.8)**\n\nCreate shipments in bulk based on a previously computed rate. See the\n[Complex Rate](/#operation/createComplexRateRequest) endpoint for details\non how to obtain a rateId.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X POST {server-url}/shipments/bulk/{rateId}\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "rateId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The rateId from a [Complex Rate result](/#operation/getComplexRateResult)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully queued an asynchronous bulk shipment creation request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/CreateBulkShipmentsStatusResponse"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "The specified rateId could not be found"
          }
        }
      }
    },
    "/shipments/bulk/{rateId}/{requestId}": {
      "get": {
        "operationId": "getCreateBulkShipmentsStatus",
        "tags": [
          "Shipments"
        ],
        "summary": "Get bulk shipment creation request status",
        "description": "**(ADDED IN v1.8)**\n\nGet the status of an asynchronous bulk shipment creation request\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/shipments/bulk/{rateId}/{requestId}\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "rateId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The rateId of the [Complex Rate result](/#operation/getComplexRateResult)"
          },
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The asynchronous bulk shipment creation request ID"
          }
        ],
        "responses": {
          "200": {
            "description": "The status of an asynchronous bulk shipment creation request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/CreateBulkShipmentsStatusResponse"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      }
    },
    "/shipments/bulk/{rateId}/{requestId}/result": {
      "get": {
        "operationId": "getCreateBulkShipmentsResult",
        "tags": [
          "Shipments"
        ],
        "summary": "Get bulk shipment creation result",
        "description": "**(ADDED IN v1.8)**\n\nGet the result of a completed asynchronous bulk shipment creation request\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/shipments/bulk/{rateId}/{requestId}/result\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "rateId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The rateId of the [Complex Rate result](/#operation/getComplexRateResult)"
          },
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The requestId of the [Bulk Shipment Creation request](/#operation/createCreateBulkShipmentsRequest)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "errors": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          },
                          "nullable": true
                        },
                        "result": {
                          "type": "array",
                          "description": "Array of shipment IDs that have been created",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "Success": {
                    "value": {
                      "data": {
                        "errors": null,
                        "result": [
                          "TRX973036599-6KL",
                          "TRX440206863-K3C",
                          "TRX721903883-KT5",
                          "TRX345683288-H2X",
                          "TRX538722888-415"
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Asynchronous bulk shipment creation request is not complete yet"
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      }
    },
    "/shipments/{shipmentId}": {
      "delete": {
        "operationId": "deleteShipment",
        "tags": [
          "Shipments"
        ],
        "summary": "Delete a shipment",
        "description": "Attempt to delete a shipment. Only draft shipments can be deleted.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X DELETE {server-url}/shipments/TRX904577741-T88\n  -H 'Content-Type: application/json'\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment to delete"
          }
        ],
        "responses": {
          "204": {
            "description": "Successfully deleted shipment"
          },
          "400": {
            "description": "Invalid shipment ID in path or don't have permission to delete shipment"
          },
          "404": {
            "description": "Shipment not found"
          },
          "422": {
            "description": "Shipment cannot be deleted due to the shipment not being in deletable state"
          }
        }
      },
      "patch": {
        "operationId": "updateShipment",
        "tags": [
          "Shipments"
        ],
        "summary": "Update a shipment",
        "description": "Updates the details of a shipment.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X PATCH {server-url}/shipments/TRX973036599-6KL\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\\\n  -d '{\n    \"pickupInstructions\": \"Needs to go out ASAP!\"\n  }'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment that needs to be updated"
          }
        ],
        "requestBody": {
          "description": "Payload describing the changes that need to be updated in your shipment",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateShipmentPayload"
              },
              "example": {
                "pickupInstructions": "Needs to go out ASAP!"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Success"
          }
        }
      },
      "get": {
        "operationId": "getShipment",
        "tags": [
          "Shipments"
        ],
        "summary": "Get a shipment",
        "description": "Gets the details of a shipment\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/shipments/TRX904577741-T88\n  -H 'Content-Type: application/json'\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment"
          },
          {
            "in": "query",
            "name": "select",
            "schema": {
              "type": "string"
            },
            "description": "**(ADDED IN v1.22)** The comma-separated list of fields to include in the shipment response (if not specified or blank then all fields will be included).\n\nIf a field is specified that is not defined by the Shipment object, then responds with HTTP 400. Only top-level fields are supported.\n"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/Shipment"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid payload, select contains a field not in a Shipment object, or permission denied.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "description": "The error message",
                      "example": "Invalid data payload"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      }
    },
    "/shipments/{shipmentId}/post": {
      "post": {
        "operationId": "postShipment",
        "tags": [
          "Shipments"
        ],
        "summary": "Post a shipment",
        "deprecated": true,
        "description": "**REMOVED AS OF v1.19. Will always respond with 404.**\n\nPost a shipment to our driver community for pickup.\n",
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment that needs to be updated"
          }
        ],
        "responses": {
          "204": {
            "description": "Success"
          }
        }
      }
    },
    "/shipments/{shipmentId}/cancel": {
      "post": {
        "operationId": "cancelShipment",
        "tags": [
          "Shipments"
        ],
        "summary": "Cancel a Shipment",
        "description": "Cancels a shipment. A cancelled shipment will no longer be able to be posted to drivers. \nAdditionally, the merchant will be charged a cancellation fee if a driver has already accepted the shipment.\n\nCan only cancel shipments that have a `currentStatus` of\nWAITING_FOR_ACCEPTANCE, EN_ROUTE_TO_PICKUP, OUT_FOR_DELIVERY,\nRENOUNCED_BY_DRIVER, or ON_HOLD.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X POST {server-url}/shipments/TRX973036599-6KL/cancel\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment that needs to be cancelled"
          }
        ],
        "responses": {
          "204": {
            "description": "Success"
          },
          "400": {
            "description": "Invalid shipment ID in path or don't have permission to delete shipment"
          },
          "404": {
            "description": "Shipment not found"
          },
          "422": {
            "description": "Shipment cannot be cancelled due to the shipment not being in cancellable state"
          }
        }
      }
    },
    "/shipments/{shipmentId}/parcels/{deliveryIndex}": {
      "patch": {
        "operationId": "updateShipmentParcel",
        "tags": [
          "Shipments"
        ],
        "summary": "Update a parcel",
        "description": "Updates the details of a parcel.\n\n**(ADDED IN v1.1)**\nWhen updating metadata fields the fields will be merged into the parcel's existing\nmetadata. Any metadata fields set to `null` or `undefined` will be deleted.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X PATCH {server-url}/shipments/TRX973036599-6KL/parcels/0\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\\\n  -d '{\n    \"deliveryAddress\": \"207 Queen St, Ottawa ON K1P 6E5, CA\"\n    \"deliveryAddressNotes\": \"Apartment 103, call them as the buzzer doesn't work\"\n    \"deliveryName\": \"John Doe\",\n    \"description\": \"Grocery order with 3 bags\",\n    \"orderId\": \"3453FR-REF\"\n  }'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment that needs to be updated"
          },
          {
            "in": "path",
            "name": "deliveryIndex",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "The delivery index of the parcel to be updated"
          }
        ],
        "requestBody": {
          "description": "Payload containing the parcel's data that needs to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ParcelPayload"
              },
              "example": {
                "deliveryAddress": "207 Queen St, Ottawa ON K1P 6E5, CA",
                "deliveryName": "John Doe",
                "description": "Grocery order with 3 bags",
                "orderId": "3453FR-REF"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Success"
          },
          "400": {
            "description": "Invalid payload or permission denied."
          },
          "500": {
            "description": "Unknown server problem"
          }
        }
      }
    },
    "/shipments/{shipmentId}/tracking/{deliveryIndex}": {
      "post": {
        "operationId": "createTrackingUrlDeliveryIndex",
        "tags": [
          "Shipments"
        ],
        "summary": "Parcel tracking URL",
        "description": "Creates a tracking URL for a specific parcel by index\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X POST {server-url}/shipments/TRX973036599-6KL/tracking/0\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the shipment"
          },
          {
            "in": "path",
            "name": "deliveryIndex",
            "required": true,
            "schema": {
              "type": "number"
            },
            "description": "The index of the parcel to retrieve a tracking URL for"
          }
        ],
        "requestBody": {
          "description": "Optional request parameters",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "lifetime": {
                    "description": "Lifetime of the tracking URL in seconds. Default is 24 hours and maximum is 31 days. After the lifetime the tracking page will respond with 404.",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 2678400,
                    "default": 86400
                  }
                }
              },
              "examples": {
                "lifetime": {
                  "summary": "lifetime of 7 days",
                  "value": {
                    "lifetime": 604800
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TrackingUrlResponse"
                },
                "examples": {
                  "Valid Tracking Url": {
                    "value": {
                      "data": {
                        "trackingUrl": "{tracking-server-url}?token=<jwt token goes here>"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/shipments/{shipmentId}/create-shipping-label": {
      "post": {
        "operationId": "createShippingLabel",
        "tags": [
          "Shipments"
        ],
        "summary": "Get shipping labels",
        "description": "Get a shipping label for a specific parcel by index, or if `deliveryIndex` is not provided then get shipping labels for all parcels in the shipment.\n\nIf `Accept` header is `application/json` and `deliveryIndex` is specified then\nresponds with `application/json`.\n\nIf no `deliveryIndex` is provided then responds with `application/pdf`.\n\nOtherwise responds with `image/png`.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X POST {server-url}/shipments/TRX973036599-6KL/create-shipping-label?deliveryIndex=1\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the shipment"
          },
          {
            "in": "query",
            "name": "deliveryIndex",
            "schema": {
              "type": "boolean"
            },
            "description": "The index of the parcel to get the shipping label for\n\n**(CHANGED IN v1.4)**\n\nIf not specified then get labels for all parcels in the shipment.\n"
          },
          {
            "in": "query",
            "name": "imageHeight",
            "schema": {
              "type": "number"
            },
            "description": "Height of the label image. **Ignored if `deliveryIndex` is not provided.**"
          },
          {
            "in": "query",
            "name": "imageWidth",
            "schema": {
              "type": "number"
            },
            "description": "Width of the label image. **Ignored if `deliveryIndex` is not provided.**"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ShippingLabelJSONResponse"
                },
                "examples": {
                  "json": {
                    "value": {
                      "data": {
                        "base64image": "data:image/png;base64,base64content"
                      }
                    }
                  }
                }
              },
              "image/png": {
                "schema": {
                  "type": "string",
                  "format": "binary",
                  "description": "Response if `deliveryIndex` is specified and `Accept` is not `application/json`."
                }
              },
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary",
                  "description": "Response if `deliveryIndex` is not specified."
                }
              }
            }
          }
        }
      }
    },
    "/regions/service-city-zones": {
      "get": {
        "operationId": "serviceCityZones",
        "tags": [
          "Regions"
        ],
        "summary": "Retrieve service city zones",
        "description": "**(ADDED IN v1.6)**\n\nReturns all the service city zones that includes (for each city) their geoJSON geometry (polygons/multipolygons)\n\n### Rate Limiting\n\nThis operation can be requested without authentication, however it will have a\nstrict rate limit of 6 requests every 10 seconds.\n\nHowever, authenticated requests can request 12 times every 10 seconds.\n",
        "security": [
          {},
          {
            "MerchantApiKeyAuth": []
          },
          {
            "AccessTokenAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "pickupAddress",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "The pickup address from which to generate the tiered zones.",
            "example": "123 Fake St, Ottawa ON K2G 6F2, CA"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "pickup": {
                      "type": "array",
                      "description": "Geographic areas that merchants can create deliveries for pickup from",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "description": "Id of service city zone"
                          },
                          "geometry": {
                            "type": "object",
                            "description": "Geometry geoJSON",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": [
                                  "Polygon",
                                  "Multipolygon"
                                ]
                              },
                              "coordinates": {
                                "type": "array",
                                "description": "Array of arrays containing longitude and latitude coordinates (in that order)",
                                "items": {
                                  "type": "array",
                                  "items": {
                                    "type": "number"
                                  }
                                }
                              }
                            }
                          },
                          "metadata": {
                            "type": "object",
                            "description": "Object that can contain miscellaneous props, but will always contain \"layer\""
                          },
                          "serviceCity": {
                            "type": "string",
                            "description": "Service city name"
                          },
                          "type": {
                            "type": "string",
                            "description": "Reference to the zone type (\"pickup\")"
                          }
                        }
                      }
                    },
                    "delivery": {
                      "type": "array",
                      "description": "Geographic areas that merchants can deliver to according to the standard delivery fees\n",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "description": "Id of service city zone"
                          },
                          "geometry": {
                            "type": "object",
                            "description": "Geometry geoJSON",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": [
                                  "Polygon",
                                  "Multipolygon"
                                ]
                              },
                              "coordinates": {
                                "type": "array",
                                "description": "Array of arrays containing longitude and latitude coordinates (in that order)",
                                "items": {
                                  "type": "array",
                                  "items": {
                                    "type": "number"
                                  }
                                }
                              }
                            }
                          },
                          "metadata": {
                            "type": "object",
                            "description": "Object that can contain miscellaneous props, but will always contain \"layer\""
                          },
                          "serviceCity": {
                            "type": "string",
                            "description": "Service city name"
                          },
                          "type": {
                            "type": "string",
                            "description": "Reference to the zone type (\"delivery\")"
                          }
                        }
                      }
                    },
                    "surcharge": {
                      "type": "array",
                      "description": "Geographic areas that are considered outside the standard delivery zone and could include a\nsurcharge fee in addition to the standard delivery fee\n",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "description": "Id of service city zone"
                          },
                          "geometry": {
                            "type": "object",
                            "description": "Geometry geoJSON",
                            "properties": {
                              "type": {
                                "type": "string",
                                "enum": [
                                  "Polygon",
                                  "Multipolygon"
                                ]
                              },
                              "coordinates": {
                                "type": "array",
                                "description": "Array of arrays containing longitude and latitude coordinates (in that order)",
                                "items": {
                                  "type": "array",
                                  "items": {
                                    "type": "number"
                                  }
                                }
                              }
                            }
                          },
                          "metadata": {
                            "type": "object",
                            "description": "Object that can contain miscellaneous props, but will always contain \"layer\""
                          },
                          "serviceCity": {
                            "type": "string",
                            "description": "Service city name"
                          },
                          "type": {
                            "type": "string",
                            "description": "Reference to the zone type (\"surcharge\")"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "The request has been rate limited. Try making the request again after the rate limit window."
          },
          "500": {
            "description": "Server error. Try making the request again."
          }
        }
      }
    },
    "/routing": {
      "post": {
        "operationId": "createRoutingRequest",
        "tags": [
          "Routing"
        ],
        "summary": "Create routing request",
        "description": "**(CHANGE AS OF DEC 1, 2022)** All `scheduledPostAt` values must be within **8:00am-11:00am, 11:00am-2:00pm, and 2:00pm-5:00pm local time (inclusive)**.\n\nAdditionally, `scheduledPostAt` cannot be set to a value within the current time window or in the past. A time window is current when\nthe local time of the pickup address enters the time window.\n\nFor example: If the current time is 9AM local time, then you can only set `scheduledPostAt` to 1PM or later on the same day.\n\nFor example: If the current time is 2PM local time, then you can only set `scheduledPostAt` to 8AM or later the following day.\n\nYou can still schedule in the future, but the `scheduledPostAt` value needs to be within one of the time windows described above.\n\n---\n\nQueue a list of parcels to be routed and added to optimized shipments.\n\nThe typical use case of this API is to select all your parcels and\nprovide in bulk to this endpoint, which responds with an asynchronous routing\nrequest ID. Then use this asynchronous routing request ID to obtain the\nstatus of the routing request and later the result.\n\n**Order ID**\n\nFor each parcel provided to this endpoint, the `orderId` must be unique among\nall parcels. This allows us to refer back to the parcel by `orderId` in the\nresult `errors` array.\n\n**Note on Optimization**\nThis endpoint does not use our most up-to-date routing optimization technology. We\nrecommend using the [Complex Rate](/#operation/createComplexRateRequest) endpoint instead.\n\n**(DEPRECATED AS OF v1.8)** Use the new [Complex Rate](/#operation/createComplexRateRequest)\nendpoint, combined with the [Create Shipments](/#operation/createCreateBulkShipmentsRequest) endpoint.\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "parcels"
                ],
                "properties": {
                  "locationId": {
                    "type": "string",
                    "description": "Optionally attach a Location to this request. Will be set to default if not specified. Please see [Locations](#tag/getLocations)."
                  },
                  "parcels": {
                    "type": "array",
                    "minItems": 1,
                    "maxItems": 400,
                    "items": {
                      "$ref": "#/components/schemas/DirectShipmentPayload"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully queued an asynchronous routing request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/RoutingStatusResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input provided such as invalid address, etc. No routing request\nis scheduled when input errors are detected.\n",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/routing/{requestId}": {
      "get": {
        "operationId": "getRoutingStatus",
        "tags": [
          "Routing"
        ],
        "summary": "Get routing request status",
        "description": "Get the status of an asynchronous routing request",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The asynchronous routing request ID"
          }
        ],
        "responses": {
          "200": {
            "description": "The status of an asynchronous routing request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/RoutingStatusResponse"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No asynchronous routing request found"
          }
        }
      }
    },
    "/routing/{requestId}/result": {
      "get": {
        "operationId": "getRoutingRequestResult",
        "tags": [
          "Routing"
        ],
        "summary": "Get routing request result",
        "description": "Get the result of a completed asynchronous routing request",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The asynchronous routing request ID"
          }
        ],
        "responses": {
          "200": {
            "description": "The result of a completed asynchronous routing request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/RoutingResultResponse"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No asynchronous routing request found"
          },
          "422": {
            "description": "Asynchronous routing request is not complete yet"
          }
        }
      }
    },
    "/storage/get/shipment/images/pickup": {
      "get": {
        "operationId": "getShipmentPickupImage",
        "tags": [
          "Storage"
        ],
        "summary": "Pickup photo",
        "description": "Gets the actual JPG image data of the driver's pickup.\n\nThis is used as a confirmation that the driver has picked up the parcel,\nand ideally should be on the way to delivery.\n\nYou may assume this photo exists if the Status of the Shipment is at least 'Out for delivery'.\n\nPlease see [shipments](/#operation/getShipment) for the possible statuses a Shipment may have.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET \"{server-url}/get/shipment/images/pickup?shipmentId=TRX973036599-6KL&index=0\"\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "servers": [
          {
            "description": "production",
            "url": "https://trexity.app/storage"
          },
          {
            "description": "sandbox",
            "url": "https://trexity-driver-mobile.uc.r.appspot.com/storage"
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the Shipment that this parcel belongs to"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/FileResponse"
          },
          "304": {
            "description": "File contents haven't changed"
          },
          "404": {
            "description": "File not found"
          }
        }
      }
    },
    "/storage/get/shipment/images/delivery": {
      "get": {
        "operationId": "getShipmentDeliveryImage",
        "tags": [
          "Storage"
        ],
        "summary": "Drop-off photo",
        "description": "Gets the actual JPG image data of the driver's delivery image for this parcel.\n\nThis is used as a confirmation that the driver has delivered the parcel.\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET \"{server-url}/get/shipment/images/delivery?shipmentId=TRX973036599-6KL&index=0\"\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "servers": [
          {
            "description": "production",
            "url": "https://trexity.app/storage"
          },
          {
            "description": "sandbox",
            "url": "https://trexity-driver-mobile.uc.r.appspot.com/storage"
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "shipmentId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the Shipment that this parcel belongs to"
          },
          {
            "in": "query",
            "name": "index",
            "required": true,
            "schema": {
              "type": "number"
            },
            "description": "The index of the parcel as specified in the Shipment's definition.\n\nSee [here](/#operation/getShipment) and check the \"parcels\" array inside the Shipment's data for reference.\n"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/FileResponse"
          },
          "304": {
            "description": "File contents haven't changed"
          },
          "404": {
            "description": "File not found"
          }
        }
      }
    },
    "/parcels/{parcelId}": {
      "get": {
        "operationId": "getParcel",
        "tags": [
          "Parcels"
        ],
        "summary": "Get Parcel",
        "description": "Retrieve a parcel\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/parcels/1234-4321-1234-4321\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "parcelId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the parcel (can be externalId or parcel ID)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ParcelResponse"
                }
              }
            }
          },
          "404": {
            "description": "Parcel not found"
          }
        }
      }
    },
    "/parcels/{parcelId}/delivery-status": {
      "get": {
        "operationId": "getParcelDeliveryStatus",
        "tags": [
          "Parcels"
        ],
        "summary": "Get Parcel Delivery Status",
        "description": "**(ADDED IN v1.26)** Retrieve a parcel's delivery status\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/parcels/1234-4321-1234-4321/delivery-status\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "parcelId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the parcel (can be externalId or parcel ID)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "description": "The current delivery status of the parcel.\n\n- `pending`: The parcel is awaiting pickup or delivery.\n- `in-transit`: The parcel is in transit, either out for pickup or out for delivery.\n- `delivered`: The parcel has been delivered.\n- `undeliverable`: The delivery was attempted but failed and the parcel was returned to the sender.\n- `cancelled`: The parcel was cancelled.\n",
                          "type": "string",
                          "enum": [
                            "pending",
                            "in-transit",
                            "delivered",
                            "undeliverable",
                            "cancelled"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Parcel not found"
          }
        }
      }
    },
    "/parcels/{parcelId}/pod": {
      "get": {
        "operationId": "getParcelPod",
        "tags": [
          "Parcels"
        ],
        "summary": "Get Parcel Proof of Delivery",
        "description": "Get a parcel's proof of delivery\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/parcels/1234-4321-1234-4321/pod\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "parcelId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the parcel (can be externalId or parcel ID)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "image/png": {
                "schema": {
                  "type": "string",
                  "format": "binary",
                  "description": "Photographic Proof of Delivery."
                }
              }
            }
          },
          "400": {
            "description": "Parcel does not have photographic Proof-Of-Delivery support.\nThis means that the Parcel is a part of a shipment that uses customer\nPIN as a delivery verification mechanism.\n"
          },
          "404": {
            "description": "Parcel not found or parcel not delivered yet"
          }
        }
      }
    },
    "/parcels/{parcelId}/label": {
      "get": {
        "operationId": "getParcelLabel",
        "tags": [
          "Parcels"
        ],
        "summary": "Get Parcel Label",
        "description": "Get a parcel's shipping label\n",
        "x-codeSamples": [
          {
            "lang": "Shell",
            "source": "curl -X GET {server-url}/parcels/1234-4321-1234-4321/label\\\n  -H 'Content-Type: application/json'\\\n  -H 'Authorization: Bearer <Trexity API Key>'\n"
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "parcelId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The id of the parcel (can be externalId or parcel ID)"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary",
                  "description": "A label that needs to be scanned at pickup by a Trexity driver."
                }
              },
              "image/png": {
                "schema": {
                  "type": "string",
                  "format": "binary",
                  "description": "A label that needs to be scanned at pickup by a Trexity driver."
                }
              },
              "application/jsonl": {
                "schema": {
                  "type": "string",
                  "format": "jsonl",
                  "description": "**(ADDED IN v1.27)** JSONL text where each line represents a label encoded as a JSON object. Up to \"numLabels\" (from the parcel) labels are returned.\n\nEach label is an encoded JSON object with the following fields:\n\n- `label`: The label as a base64 encoded string with PNG format.\n- `mimeType`: The MIME type of the label. Default is `image/png`.\n\n**NOTE:** The example shows the response as a JSON encoded string, but in practice\nthe response is actually JSON encoded objects separated by newline characters. This is\na limitation of our OpenAPI renderer.\n\nSee: https://jsonlines.org/\n"
                },
                "example": "{\"label\": \"...base64encodedstring...\", \"mimeType\": \"image/png\"}\n{\"label\": \"...base64encodedstring...\", \"mimeType\": \"image/png\"}\n"
              }
            }
          },
          "400": {
            "description": "Parcel does not have a label.\nThis means that the Merchant is responsible for creating the labels.\n"
          },
          "404": {
            "description": "Parcel not found"
          }
        }
      }
    },
    "/webhooks": {
      "get": {
        "operationId": "getWebhooks",
        "tags": [
          "Webhooks"
        ],
        "summary": "List webhooks",
        "description": "Gets all registered webhooks or registered webhooks for an event.\n",
        "parameters": [
          {
            "in": "query",
            "name": "eventName",
            "schema": {
              "$ref": "#/components/schemas/WebhookEventName"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List registered webhooks",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Webhook"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parameters or payload is invalid. Correct the parameters and try again.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An internal error has occurred and the request cannot be completed.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "operationId": "createWebhook",
        "tags": [
          "Webhooks"
        ],
        "summary": "Create webhook",
        "description": "Create a new webhook for the specified event.\n",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventName",
                  "url"
                ],
                "properties": {
                  "eventName": {
                    "$ref": "#/components/schemas/WebhookEventName"
                  },
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Secure (https://...) URL to send the webhook request to.",
                    "example": "https://example.com/trexity/webhook-handler"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully register a webhook.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "required": [
                        "webhookId"
                      ],
                      "properties": {
                        "webhookId": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Parameters or payload is invalid. Correct the parameters and try again.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An internal error has occurred and the request cannot be completed.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "callbacks": {
          "shipment.created": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.created",
                "description": "Occurs when a shipment has been created.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.updated": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.updated",
                "description": "Occurs when a shipment has had address or parcel information updated.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.deleted": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.deleted",
                "description": "Occurs when a shipment has been deleted.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.posted": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.posted",
                "description": "Occurs when a shipment has been posted to our driver community. This can occur as a result of an explicit \"post\" action\nfrom a user or from the platform posting a shipment based on the shipment's `scheduledPostAt` setting.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.driver.accepted": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.driver.accepted",
                "description": "Occurs when a shipment has been accepted for delivery by a driver from our driver community.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.driver.arrived_at_pickup": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.driver.arrived_at_pickup",
                "description": "Occurs when a driver has arrived at the pickup address for a parcel within a shipment.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.driver.picked_up": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.driver.picked_up",
                "description": "Occurs when a driver has picked up (e.g. has posession) a parcel within a shipment.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.driver.arrived_at_delivery": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.driver.arrived_at_delivery",
                "description": "Occurs when a driver arrived at a parcel's delivery address.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.driver.parcel_delivered": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.driver.parcel_delivered",
                "description": "Occurs when a driver has delivered a parcel within a shipment.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.completed": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.completed",
                "description": "Occurs when a shipment has all deliverable parcels delivered and has been successfully paid.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.cancelled": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.cancelled",
                "description": "Occurs when a shipment has been cancelled.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.driver.renounced": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.driver.renounced",
                "description": "Occurs when a shipment has been renounced by a driver after they accepted.",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "shipment.on_hold": {
            "{$request.body#/url}": {
              "post": {
                "summary": "shipment.on_hold",
                "description": "Occurs when a shipment has been put on hold.\n\nA shipment on hold will be immediately removed from our driver network and not be automatically posted to our driver community.\n\nAdditionally, shipments on hold must be re-posted.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ShipmentWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.created": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.created",
                "description": "Occurs when a parcel has been created during a shipment create or added to a shipment during update.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.updated": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.updated",
                "description": "Occurs when a parcel has been updated during a shipment update.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.deleted": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.deleted",
                "description": "Occurs when a parcel has been deleted during a shipment update.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.picked_up": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.picked_up",
                "description": "Occurs when a parcel has been scanned and picked up by a driver.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.delivered": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.delivered",
                "description": "Occurs when a parcel has been scanned and delivered to the recipient.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.returning": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.returning",
                "description": "Occurs when a parcel is being returned due to the driver not being able to complete the delivery.\nThis can be due to customer not being home, customer not having the delivery PIN, or customer refusing delivery.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          },
          "parcel.returned": {
            "{$request.body#/url}": {
              "post": {
                "summary": "parcel.returned",
                "description": "Occurs when a parcel has been returned to merchant.\n",
                "parameters": [
                  {
                    "$ref": "#/components/parameters/x-trexity-signature"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-event-name"
                  },
                  {
                    "$ref": "#/components/parameters/x-trexity-webhook-order-id"
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/ParcelWebhookPayload"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Request successfully processed"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/webhooks/{webhookId}": {
      "delete": {
        "operationId": "deleteWebhook",
        "tags": [
          "Webhooks"
        ],
        "summary": "Delete a webhook",
        "description": "Delete a registered webhook.\n",
        "parameters": [
          {
            "in": "path",
            "required": true,
            "name": "webhookId",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successfully deleted a webhook or if the webhook ID does not exist."
          },
          "400": {
            "description": "Parameters or payload is invalid. Correct the parameters and try again.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Webhook is not found."
          },
          "500": {
            "description": "An internal error has occurred and the request cannot be completed.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/locations": {
      "get": {
        "operationId": "getLocations",
        "tags": [
          "Locations"
        ],
        "summary": "List locations for a Merchant",
        "description": "Gets all Locations. In order to manage Locations, you need to use the [Merchant Portal](https://merchant.trexity.com/).\n",
        "responses": {
          "200": {
            "description": "List Locations for a Merchant",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/MerchantLocation"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An internal error has occurred and the request cannot be completed.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/locations/by-query": {
      "get": {
        "operationId": "getLocationByQuery",
        "tags": [
          "Locations"
        ],
        "summary": "Get a best match location based on name and address",
        "description": "Returns a best match location based on name or address.\n\n**One of name or address or both must be provided.**\n",
        "parameters": [
          {
            "in": "query",
            "name": "address",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "The address that we will use to find a location.",
            "example": "123 Fake St, Ottawa ON K2G 6F2, CA"
          },
          {
            "in": "query",
            "name": "name",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "The name of the location.",
            "example": "default"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/MerchantLocation"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Input error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string",
                      "nullable": true
                    },
                    "params": {
                      "type": "object",
                      "nullable": true
                    },
                    "code": {
                      "type": "string",
                      "nullable": true,
                      "description": "Unexhaustive list of codes.\n\n- `invalid-data-payload` = When there are issues with the input data provided\n"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "NotFound"
          },
          "500": {
            "description": "An internal error has occurred and the request cannot be completed.",
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "error"
                  ],
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/receipts/{yearMonth}": {
      "get": {
        "operationId": "getReceipt",
        "tags": [
          "Receipts"
        ],
        "summary": "Get Receipt",
        "description": "Retrieve the receipt items for all or one location from a receipt for a particular calendar month\n",
        "parameters": [
          {
            "in": "path",
            "name": "yearMonth",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The year and month like \"YYYY-MM\"",
            "example": "2022-01"
          },
          {
            "in": "query",
            "name": "location",
            "schema": {
              "type": "string"
            },
            "description": "The merchant location ID or case insensitive name. If specified then all receipt items will only be for this lcoation.",
            "example": "My Shop"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReceiptResponse"
                }
              },
              "text/csv": {
                "schema": {
                  "description": "The receipt items rendered as CSV"
                }
              },
              "text/html": {
                "schema": {
                  "description": "The receipt items rendered as a standalone HTML"
                }
              },
              "application/pdf": {
                "schema": {
                  "description": "The receipt items rendered as a PDF"
                }
              }
            }
          },
          "400": {
            "description": "Invalid parameters"
          },
          "404": {
            "description": "Merchant location not found"
          }
        }
      }
    }
  }
}