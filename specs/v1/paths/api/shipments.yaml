get:
  operationId: getShipments
  tags: [Shipments]
  summary: List shipments
  description: |
    List shipments that match the specified filters.

    ## Filtering By Dates

    When filtering by a date range both the `fromDate` and `toDate` query parameters must be provided.

    ## Filtering By External ID

    When filtering by a parcel's external ID you **cannot filter by dates**. Filtering by dates and external ID are mutually exclusive filters. If `externalId` is specified it will take precendence.
    **(added in v1.2)**

    ## ~~Filtering By Parcel Metadata~~

    ~~Parcel metadata fields can be filtered on by using query parameters with the following pattern `meta_{fieldName}`.~~

    ~~Additionally, the metadata field must have been saved as a string, and not a number for example. This is required since
    the query parameter value is not converted to a number.~~

    ~~Example: `https://{server-url}/shipments?meta_partnerShipmentId=someid`~~
    **(deprecated in v1.2)**
  x-codeSamples:
    - $ref: ../../code_samples/Shell/shipments/get-shipments.yaml

  ##############################################################################

  parameters:
    - in: query
      name: fromDate
      schema:
        $ref: ../../components/schemas/SimplifiedDateISOString.yaml
    - in: query
      name: toDate
      schema:
        $ref: ../../components/schemas/SimplifiedDateISOString.yaml
    - in: query
      name: externalId
      schema:
        type: string
        maxLength: 256
        description: |
          **(added in v1.2)** The ID of the external entity that is associated to this parcel (e.g. the external order or shipment ID).
    - in: query
      name: merchantPpid
      deprecated: true
      description: |
        **(deprecated in v1.1)**
      schema:
        type: string
  responses:
    '200':
      description: Success
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: ../../components/schemas/Shipment.yaml
          examples:
            Success:
              value:
                data:
                  - $ref: ../../components/examples/shipment1.yaml
                  - $ref: ../../components/examples/shipment2.yaml

            Fail:
              value:
                data: []

