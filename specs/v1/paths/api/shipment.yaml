post:
  operationId: createShipment
  tags: [Shipments]
  summary: Create a shipment
  description: |
    Create a new shipment.

    If no `pickupAddress` is specified then the merchant's business address will be used as the pickup address.
  x-codeSamples:
    - $ref: ../../code_samples/Shell/shipments/create-shipment.yaml

  ##############################################################################

  requestBody:
    description: Payload describing your shipment
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/payloads/CreateShipmentPayload.yaml
        examples:
          ImmediateInit:
            value:
              pickupAddress: '9 Slack Rd, Nepean ON K2G 0B7, CA'
              requirements: {}
              pickupNotes: 'Please be careful, since it may contain fragile things!'
              parcels:
                - deliveryAddress: '207 Queen St, Ottawa ON K1P 6E5, CA'
                  deliveryName: 'Srinivasa Ramanujan'
                  description: 'Glasses, bifocals'
                  orderId: 'BFG10K'
                  parcelValue: 10000
          ScheduledInit:
            value:
              pickupAddress: '207 Queen St, Ottawa ON K1P 6E5, CA'
              requirements: {}
              pickupNotes: 'Please be careful, since it may contain fragile things!'
              scheduledPostAt: '2020-07-25T10:16:11.048Z'
              parcels:
                - deliveryAddress: '343 Booth St, Ottawa ON K1R 7K1, CA'
                  deliveryName: 'Lagrange'
                  description: 'Copy of Newtons Principia Mathematica'
                  orderId: 'NWTNRULZ'
                  parcelValue: 15000
  responses:
    '500':
      description: Unknown server problem
    '400':
      description: Invalid payload or permission denied.
    '200':
      description: Success
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  shipmentId:
                    type: string
          examples:
            Success:
              value:
                data:
                  shipmentId: 'TRX973036599-6KL'

delete:
  operationId: deleteShipment
  tags: [Shipments]
  summary: Delete a shipment
  description: |
    Attempt to delete a shipment. Only draft shipments can be deleted.
  x-codeSamples:
    - $ref: ../../code_samples/Shell/shipments/delete-shipment.yaml

  ##############################################################################

  parameters:
    - in: path
      name: shipmentId
      required: true
      schema:
        type: string
      description: The id of the shipment to delete
  responses:
    '204':
      description: Successfully deleted shipment
    '400':
      description: Invalid shipment ID in path or don't have permission to delete shipment
    '404':
      description: Shipment not found
    '422':
      description: Shipment cannot be deleted due to the shipment not being in deletable state

patch:
  operationId: updateShipment
  tags: [Shipments]
  summary: Update a shipment
  description: |
    Updates the details of a shipment.
  x-codeSamples:
    - $ref: ../../code_samples/Shell/shipments/update-shipment.yaml

  ##############################################################################

  parameters:
    - in: path
      name: shipmentId
      required: true
      schema:
        type: string
      description: The id of the shipment that needs to be updated
  requestBody:
    description: Payload describing the changes that need to be updated in your shipment
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/payloads/UpdateShipmentPayload.yaml
        example:
          pickupNotes: 'Needs to go out ASAP!'
  responses:
    '204':
      description: Success

get:
  operationId: getShipment
  tags: [Shipments]
  summary: Get a shipment
  description: |
    Gets the details of a shipment
  x-codeSamples:
    - $ref: ../../code_samples/Shell/shipments/get-shipment.yaml

  ##############################################################################

  parameters:
    - in: path
      name: shipmentId
      required: true
      schema:
        type: string
      description: The id of the shipment
  responses:
    '500':
      description: Unknown server problem
    '400':
      description: Invalid payload or permission denied.
    '200':
      description: Success
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../components/schemas/Shipment.yaml

          examples:
            Success:
              value:
                data:
                  $ref: ../../components/examples/shipment1.yaml
