delete:
  operationId: deleteDelivery
  tags: [Deliveries]
  summary: Delete delivery
  description: |
    Attempt to delete a delivery. Only draft deliveries can be deleted.

  parameters:
    - in: path
      name: deliveryId
      required: true
      schema:
        type: string
      description: The id of the delivery to delete
  responses:
    '200':
      description: Successfully deleted delivery
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  success:
                    type: boolean
    '400':
      $ref: ../../components/error-responses/400.yaml
    '404':
      $ref: ../../components/error-responses/404.yaml
    '422':
      $ref: ../../components/error-responses/422.yaml

patch:
  operationId: updateDelivery
  tags: [Deliveries]
  summary: Update delivery
  description: |
    Updates the details of a delivery.

    **Unexhaustive list of error codes.**

    - `unauthorized-requirements` = When the requirements specified don't match the requirements granted to the merchant
    - `pickup-address-unserviceable` = When the pickup address cannot be matched to any of the merchant's locations
    - `invalid-pickup-address` = When the pickup address is invalid
    - `invalid-delivery-address` = When the delivery address is invalid
    - `pickup-point-outside-zone` = When the pickup address is outside Trexity's service area
    - `invalid-input` = When there are issues with the input data provided
    - `invalid-delivery-data` = When there are issues with the data provided and the delivery cannot be updated
    - `num-labels-too-large` = When numLabels is too large
    - `invalid-scanids` = When the scanId specified is already in use
    - `outside-operating-hours` = When the pickup or delivery time specified is outside the your delivery hours or Trexity's service hours
    - `invalid-scheduled-posting-date` = The scheduling fields are invalid and do not describe a valid pickup window
    - `unauthorized-numlabels` = When total numLabels for the entire delivery is too large
    - `pickup-address-outsidetaxboundary` = The pickup address is outside the merchant's location province
    - `merchant-disabled` = The merchant has been disabled
    - `missing-profile-details` = The merchant has an incomplete profile
    - `no-shipment-rate` = A delivery rate failed to be calculated due to delivery or pickup address geofencing error

  parameters:
    - in: path
      name: deliveryId
      required: true
      schema:
        type: string
      description: The id of the delivery that needs to be updated
  requestBody:
    description: Payload describing the changes that need to be updated in your delivery
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/DeliveryDTOUpdate.yaml

  responses:
    '200':
      description: Success
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../components/schemas/Delivery.yaml
    '400':
      $ref: ../../components/error-responses/400.yaml
    '404':
      $ref: ../../components/error-responses/404.yaml
    '422':
      $ref: ../../components/error-responses/422.yaml

get:
  operationId: getDelivery
  tags: [Deliveries]
  summary: Get delivery
  description: |
    Gets the details of a delivery
  x-codeSamples:
    - $ref: ../../code_samples/Shell/deliveries/get-delivery.yaml

  parameters:
    - in: path
      name: deliveryId
      required: true
      schema:
        type: string
      description: The id of the delivery
    - in: query
      name: select
      schema:
        type: string
      description: |
        The comma-separated list of fields to include in the delivery response (if not specified or blank then all fields will be included).

        If a field is specified that is not defined by the Delivery object, then responds with HTTP 400. Only top-level fields are supported.
  responses:
    '200':
      description: Success
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../components/schemas/Delivery.yaml
    '400':
      $ref: ../../components/error-responses/400.yaml
    '404':
      $ref: ../../components/error-responses/404.yaml
    '500':
      $ref: ../../components/error-responses/500.yaml