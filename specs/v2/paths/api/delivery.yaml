delete:
  operationId: deleteShipment
  tags: [Shipments]
  summary: Delete a shipment
  description: |
    Attempt to delete a shipment. Only draft shipments can be deleted.
  x-codeSamples:
    - $ref: ../../code_samples/Shell/shipments/delete-shipment.yaml

  ##############################################################################

  parameters:
    - in: path
      name: deliveryId
      required: true
      schema:
        type: string
      description: The id of the delivery to delete
  responses:
    '204':
      description: Successfully deleted delivery
    '400':
      description: Invalid delivery ID in path or don't have permission to delete delivery
    '404':
      description: Delivery not found
    '422':
      description: Delivery cannot be deleted due to the delivery not being in deletable state

patch:
  operationId: updateDelivery
  tags: [Deliveries]
  summary: Update a delivery
  description: |
    Updates the details of a delivery.
  x-codeSamples:
    - $ref: ../../code_samples/Shell/deliveries/update-delivery.yaml

  ##############################################################################

  parameters:
    - in: path
      name: deliveryId
      required: true
      schema:
        type: string
      description: The id of the delivery that needs to be updated
  requestBody:
    description: Payload describing the changes that need to be updated in your delivery
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/payloads/UpdateDeliveryPayload.yaml
        example:
          pickupInstructions: 'Needs to go out ASAP!'
  responses:
    '204':
      description: Success

get:
  operationId: getDelivery
  tags: [Deliveries]
  summary: Get a delivery
  description: |
    Gets the details of a delivery
  x-codeSamples:
    - $ref: ../../code_samples/Shell/deliveries/get-delivery.yaml

  ##############################################################################

  parameters:
    - in: path
      name: deliveryId
      required: true
      schema:
        type: string
      description: The id of the delivery
    - in: query
      name: select
      schema:
        type: string
      description: |
        The comma-separated list of fields to include in the delivery response (if not specified or blank then all fields will be included).

        If a field is specified that is not defined by the Delivery object, then responds with HTTP 400. Only top-level fields are supported.
  responses:
    '500':
      description: Unknown server problem
    '400':
      description: Invalid payload, select contains a field not in a Delivery object, or permission denied.
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                description: The error message
                example: Invalid data payload
    '200':
      description: Success
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../components/schemas/Delivery.yaml
