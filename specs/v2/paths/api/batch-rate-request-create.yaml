post:
  operationId: createBatchRateRequest
  tags: [Batching]
  summary: Create batch rate request
  description: |
    Queue a list of deliveries to be batched into one or more optimal routes.

    The  use case of this API is to take multiple deliveries that have the same pickup address,
    pickup/delivery schedule then batch them into one or more optimal routes to simplify staging
    packages for efficient courier pickup.

    **Minimum Requirements**

    - Each delivery must have the same pickup address.
    - Each delivery must have the same pickup/delivery schedule.
    - Each delivery must have a unique `orderId`.
  
    **Delivery Count**

    To be eligible for batching, the number of deliveries must be at least 20.
    Otherwise, the deliveries will be processed without batching.

  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/BatchRateRequestDTO.yaml

  responses:
    '200':
      description: Successfully queued an asynchronous batch rate request
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../components/schemas/BatchRateRequest.yaml

    '400':
      $ref: ../../components/error-responses/400.yaml
    '500':
      $ref: ../../components/error-responses/500.yaml
