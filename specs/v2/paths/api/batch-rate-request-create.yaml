post:
  operationId: createBatchRateRequest
  tags: [Batching]
  summary: Create batch rate request
  description: |
    If you want to schedule a shipment, please use exactly one of:
      1) pickupStartAt and an optional pickupEndAt (when to pickup by)
      2) deliverStartAt and an optional deliverEndAt (when to deliver by)

    ---

    Queue a list of shipments for an optimally routed rate.

    The typical use case of this API is to provide multiple shipments (pickup &
    delivery) to this endpoint, which responds with a request ID to be polled
    asynchronously using the [Batch Rate status](/#operation/getBatchRateRequest)
    endpoint, and ultimately retrieving the rate using the [Batch Rate](/#operation/getBatchRate)
    endpoint.

    Optionally, you can then take the rate ID provided in the rate result and
    have the shipments created in bulk using the [Bulk Shipment Creation](/#operation/createCreateBulkShipmentsRequest)
    endpoint.

    **Order ID**

    For each parcel across all shipments provided to this endpoint, the
    `orderId` must be unique. This allows us to refer back to the parcel by
    `orderId` in the result `errors` array.

  ##############################################################################

  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/BatchRateRequestDTO.yaml

  responses:
    '200':
      description: Successfully queued an asynchronous batch rate request
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: ../../components/schemas/BatchRateRequest.yaml

    '400':
      $ref: ../../components/error-responses/400.yaml
    '500':
      $ref: ../../components/error-responses/500.yaml
